"use strict";(self.webpackChunkbalisales=self.webpackChunkbalisales||[]).push([[906],{8679:function(e,n,t){t.d(n,{Z:function(){return Z}});var i=t(4165),s=t(5861),l=t(885),a=t(2791),r=t(7342),c=t(9743),o=t(2677),d=t(6788),u=t(1089),h=t(4894),m=t(4453),x=t(9062),p=t(2892),f=t(184);var Z=function(e){var n=e.user,t=e.accountView,Z=(0,a.useState)([]),v=(0,l.Z)(Z,2),j=v[0],g=v[1],b=(0,a.useState)(!1),w=(0,l.Z)(b,2),C=w[0],N=w[1];(0,a.useEffect)((function(){(0,h.ww)(n).then((function(e){e.sort((function(e,n){return n.timeStamp-e.timeStamp})),g(e)})).catch((function(){console.error("cant get user posts")}))}),[]);var k=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){var t,s,l,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,m.cF)(),s=(0,x.JU)(p.db,"posts",n.id),e.next=4,(0,x.oe)(s);case 4:(0,h.sq)(n.id),l=0;case 6:if(!(l<n.numberOfImages)){e.next=13;break}return a=(0,m.iH)(t,"PostImages/".concat(n.id,"/image-").concat(l)),e.next=10,(0,m.oq)(a);case 10:l++,e.next=6;break;case 13:g(null===j||void 0===j?void 0:j.filter((function(e){return e.id!==n.id})));case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,f.jsx)(a.Fragment,{children:function(){if(0===j.length)return(0,f.jsx)(d.Z,{});for(var e=[],n=[],i=0;i<j.length;i++)n.push(j[i]),(i+1)%3!==0&&i!==j.length-1||(e.push(n),n=[]);return e.length>0&&(0,f.jsx)(r.ZP,{container:!0,style:{padding:"0px"},className:"grid-container-posts",children:e.map((function(e){return e.map((function(e){var n="url(".concat(null===e||void 0===e?void 0:e.urls[0],")"),i="id="+(null===e||void 0===e?void 0:e.id);return(0,f.jsx)(u.Z,{displayUrl:n,item:e,queryParam:i,accountView:t,deletePost:k,openEditModal:C,setOpenEditModal:N},e.id)}))}))})||(0,f.jsx)(c.Z,{children:(0,f.jsx)(o.Z,{xs:12,className:"center",children:"No Posts Available"})})}()})}},906:function(e,n,t){t.r(n);var i=t(8679);n.default=i.Z},1089:function(e,n,t){t.d(n,{Z:function(){return P}});var i=t(2791),s=t(3504),l=t(7342),a=t(4165),r=t(5861),c=t(885),o=t(1083),d=t(6519),u=t(9743),h=t(2677),m=t(6157),x=t(184),p=function(e){var n=e.deletePost,t=e.item,i=e.openDeleteModal,s=e.setOpenDeleteModal;return(0,x.jsx)(d.Z,{open:i,id:"delete-modal",children:(0,x.jsx)(u.Z,{className:"modal-dialog delete-modal",children:(0,x.jsxs)(h.Z,{xs:5,sm:5,md:2,className:"modal-content modal-background center",children:[(0,x.jsx)(u.Z,{className:"modal-header",children:(0,x.jsx)(h.Z,{className:"modal-title",children:"Do you want to delete this post?"})}),(0,x.jsxs)(u.Z,{children:[(0,x.jsx)(h.Z,{xs:6,children:(0,x.jsx)(m.Z,{onClick:function(){return s(!1)},children:"no"})}),(0,x.jsx)(h.Z,{xs:6,children:(0,x.jsx)(m.Z,{onClick:function(){n(t),s(!1)},children:"yes"})})]})]})})})},f=t(9891),Z=t(1747),v=t(4530),j=t(6362),g=t(4925),b=t(3347),w=t(9062),C=t(2892),N=t(9135),k=t(4453),S=function(e){var n=e.item,t=e.openEditModal,s=e.setOpenEditModal,S=e.deletePost,P=(0,i.useState)(n.title),y=(0,c.Z)(P,2),M=y[0],V=y[1],H=(0,i.useState)(n.description),I=(0,c.Z)(H,2),D=I[0],E=I[1],O=(0,i.useState)(n.type),z=(0,c.Z)(O,2),B=z[0],U=z[1],W=(0,i.useState)(n.brand),q=(0,c.Z)(W,2),F=q[0],R=q[1],J=(0,i.useState)(n.condition),A=(0,c.Z)(J,2),L=A[0],T=A[1],Y=(0,i.useState)(n.price),G=(0,c.Z)(Y,2),K=G[0],Q=G[1],X=(0,i.useState)(!1),$=(0,c.Z)(X,2),_=$[0],ee=$[1],ne=(0,i.useState)(n.numberOfImages),te=(0,c.Z)(ne,2),ie=te[0],se=(te[1],(0,i.useState)({})),le=(0,c.Z)(se,2),ae=le[0],re=le[1],ce=(0,i.useState)(""),oe=(0,c.Z)(ce,2),de=(oe[0],oe[1]);var ue=function(e){return e.map((function(e,n){return(0,x.jsx)(f.Z,{value:e,children:e},n)}))},he=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,w.JU)(C.db,"posts",n.id),e.next=3,(0,w.pl)(t,{title:M,type:B,brand:F,condition:L,price:K,description:D,timeStamp:Date.now(),numberOfImages:ie,author:{name:n.author.name,id:n.author.id}}).then((function(){var e=(0,k.iH)((0,k.cF)(),"PostImages/".concat(n.id,"/image-0"));console.log("pictureRef: ",e)})).catch((function(e){console.error("problem: ",e)})).finally((function(){window.location.reload()}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();l.ZP,n.urls.map((function(e){return(0,x.jsx)(l.ZP,{item:!0,className:"center",style:{backgroundImage:"url(".concat(e,")"),backgroundSize:"100% 100%",width:"100px",height:"100px"},onClick:function(){return function(e){re((function(n){var t;return n[e]=null===(t=!n[e])||void 0===t||t,n})),console.log(ae)}(e)},children:ae[e]},e)})),u.Z,h.Z,N.H3h;return(0,x.jsx)(d.Z,{open:t,children:(0,x.jsx)(u.Z,{className:"edit-modal",children:(0,x.jsxs)(h.Z,{xs:7,className:"modal-background center",children:[(0,x.jsx)(p,{deletePost:S,item:n,openDeleteModal:_,setOpenDeleteModal:ee}),(0,x.jsxs)(u.Z,{className:"edit-input",children:[(0,x.jsx)(h.Z,{xs:6,sm:9,className:"left",children:(0,x.jsx)("h2",{children:"Edit"})}),(0,x.jsx)(h.Z,{xs:6,sm:3,children:(0,x.jsx)(m.Z,{variant:"danger",onClick:function(e){e.preventDefault(),ee(!0)},children:"Delete"})})]}),(0,x.jsx)(u.Z,{className:"edit-input",children:(0,x.jsx)(v.Z,{fullWidth:!0,size:"small",value:M,label:"Title",className:"input-width",onChange:function(e){return V(e.target.value)}})}),(0,x.jsx)(u.Z,{className:"edit-input",children:(0,x.jsx)(v.Z,{fullWidth:!0,size:"small",value:K,label:"Price",className:"input-width",onChange:function(e){return Q(e.target.value)}})}),(0,x.jsx)(u.Z,{className:"edit-input",children:(0,x.jsxs)(j.Z,{fullWidth:!0,children:[(0,x.jsx)(g.Z,{size:"small",id:"brand-edit-label",children:"Brand"}),(0,x.jsx)(b.Z,{labelId:"brand-edit-label",id:"brand-edit-select",size:"small",value:F,label:"Brand",onChange:function(e){return R(e.target.value)},children:ue(o.YS)})]})}),(0,x.jsx)(u.Z,{className:"edit-input",children:(0,x.jsxs)(j.Z,{fullWidth:!0,children:[(0,x.jsx)(g.Z,{size:"small",id:"business-edit-label",children:"Business"}),(0,x.jsx)(b.Z,{labelId:"business-edit-label",id:"business-edit-select",size:"small",value:B,label:"Business",onChange:function(e){return U(e.target.value)},children:ue(o.V5)})]})}),(0,x.jsx)(u.Z,{className:"edit-input",children:(0,x.jsxs)(j.Z,{fullWidth:!0,children:[(0,x.jsx)(g.Z,{size:"small",id:"condition-edit-label",children:"Condition"}),(0,x.jsx)(b.Z,{labelId:"condition-edit-label",id:"condition-edit-select",size:"small",value:L,label:"Condition",onChange:function(e){return T(e.target.value)},children:ue([1,2,3,4,5,6,7,8,9,10])})]})}),(0,x.jsx)(u.Z,{className:"edit-input",children:(0,x.jsx)(Z.Z,{fullwidth:"true",minRows:3,value:D,placeholder:"Description",label:"description",onChange:function(e){return E(e.target.value)}})}),(0,x.jsxs)(u.Z,{className:"edit-input",children:[(0,x.jsx)(h.Z,{xs:6,children:(0,x.jsx)(m.Z,{onClick:function(){return s(!1)},children:"Cancel"})}),(0,x.jsx)(h.Z,{xs:6,children:(0,x.jsx)(m.Z,{onClick:function(){he(),s(!1)},children:"Submit"})})]})]})})})};var P=function(e){var n=e.displayUrl,t=e.item,a=e.queryParam,r=e.viewCount,c=e.viewCountHeight,o=e.accountView,d=e.showViewCount,u=void 0===d?3:d,h=e.deletePost,m=e.openEditModal,p=e.setOpenEditModal;return(0,x.jsxs)(i.Fragment,{children:[o&&(0,x.jsx)(S,{item:t,openEditModal:m,setOpenEditModal:p,deletePost:h}),(0,x.jsx)(l.ZP,{item:!0,className:"post-container",style:{backgroundImage:n,height:c+"vw"},id:"post"+(null===t||void 0===t?void 0:t.id),xs:u?4:12/r,children:(0,x.jsx)(s.rU,{className:"link",to:!o&&{pathname:"/singlePost",search:a},onClick:o&&function(e){e.preventDefault(),p(!0)},children:(null===t||void 0===t?void 0:t.numberOfImages)>1&&(0,x.jsx)("svg",{style:{marginLeft:"auto",marginRight:"1vw",width:"5vw",height:"5vw",color:"white"},viewBox:"0 0 24 24",children:(0,x.jsx)("path",{fill:"currentColor",d:"M21 16V6H7V16H21M21 4C21.53 4 22.04 4.21 22.41 4.59C22.79 4.96 23 5.47 23 6V16C23 16.53 22.79 17.04 22.41 17.41C22.04 17.79 21.53 18 21 18H7C5.89 18 5 17.1 5 16V6C5 4.89 5.89 4 7 4H21M3 20H18V22H3C2.47 22 1.96 21.79 1.59 21.41C1.21 21.04 1 20.53 1 20V9H3V20Z"})})})})]})}}}]);
//# sourceMappingURL=906.6b5f8033.chunk.js.map