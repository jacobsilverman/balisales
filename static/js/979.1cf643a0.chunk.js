"use strict";(self.webpackChunkbalisales=self.webpackChunkbalisales||[]).push([[979],{1822:function(e,t,a){a.r(t),a.d(t,{default:function(){return k}});var n=a(4165),r=a(5861),l=a(1413),i=a(3433),s=a(9439),c=a(2791),o=a(2677),u=a(7022),d=a(9743),h=a(6157),f=a(3675),b=a(6278),m=a(9062),Z=a(2892),v=a(4453),p=a(9135),x=a(7391),g=a(6362),j=a(9891),N=a(4925),y=a(8588),S=a(1747),C=a(9230),I=a(184);var P=function(){var e=(0,c.useState)(localStorage.getItem("isAuth")),t=(0,c.useState)(""),a=(0,s.Z)(t,2),P=a[0],k=a[1],w=(0,c.useState)(""),B=(0,s.Z)(w,2),O=B[0],D=B[1],W=(0,c.useState)(""),R=(0,s.Z)(W,2),T=R[0],U=R[1],V=(0,c.useState)(""),F=(0,s.Z)(V,2),z=F[0],M=F[1],_=(0,c.useState)(""),A=(0,s.Z)(_,2),E=A[0],H=A[1],L=(0,c.useState)(""),$=(0,s.Z)(L,2),G=$[0],J=$[1],K=(0,c.useState)(""),Y=(0,s.Z)(K,2),q=Y[0],Q=Y[1],X=(0,c.useState)(!1),ee=(0,s.Z)(X,2),te=ee[0],ae=ee[1],ne=(0,c.useState)([]),re=(0,s.Z)(ne,2),le=re[0],ie=re[1],se=(0,c.useState)([]),ce=(0,s.Z)(se,2),oe=ce[0],ue=ce[1],de=(0,c.useState)(0),he=(0,s.Z)(de,2),fe=(he[0],he[1]),be=(0,c.useState)(0),me=(0,s.Z)(be,2),Ze=me[0],ve=me[1],pe=(0,c.useState)({title:!1,price:!1,brand:!1,sale:!1,condition:!1,blade:!1,picture:!1}),xe=(0,s.Z)(pe,2),ge=xe[0],je=xe[1],Ne=(0,C.$G)().t,ye=(0,c.useMemo)((function(){var e=!Object.values(ge).some((function(e){return!1===e}));return!0===e&&ae(!1),e}),[ge]),Se=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,a,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ae(!0),ye){e.next=3;break}return e.abrupt("return");case 3:if(le[0]){e.next=6;break}return alert("Please upload an image first!"),e.abrupt("return");case 6:return r=(0,m.hJ)(Z.db,"production-posts"),e.next=9,(0,m.ET)(r,{status:"Available",title:P,type:T,blade:q,brand:z,condition:E,price:G,description:O,numberOfImages:le.length,timeStamp:Date.now(),author:{name:(null===Z.I8||void 0===Z.I8||null===(t=Z.I8.currentUser)||void 0===t?void 0:t.displayName)||"anonymous",id:(null===Z.I8||void 0===Z.I8||null===(a=Z.I8.currentUser)||void 0===a?void 0:a.uid)||"none"}}).then((function(e){var t=[];return le.map((function(a,n){var r=(0,v.iH)(Z.tO,"/".concat((0,f.NZ)(),"-postImages/").concat(e.id,"/image-").concat(n)),l=(0,v.B0)(r,a);t.push(l),l.on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);fe(t)}),(function(e){return console.log(e)}),(function(){console.log(r)}))})),Promise.all(t).then((function(){console.log("all uploaded"),k(""),D(""),U(""),M(""),H(""),J(""),Q(""),ve(0),ie([]),ue([]),ae(!1)})).catch((function(e){console.error(e)})),e})).then((function(e){(0,b.iy)(e.id)})).catch((function(){console.log("error with creating post")}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ce=function(e,t){return e.map((function(e){return(0,I.jsx)(j.Z,{value:e,children:Ne(e)},t+"-"+e)}))},Ie=(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(u.Z,{className:"create-header-container",children:(0,I.jsx)(d.Z,{children:(0,I.jsx)(o.Z,{className:"create-header",children:(0,I.jsx)("h2",{children:Ne("Create Post")})})})}),(0,I.jsxs)(u.Z,{className:"create-container",children:[(0,I.jsxs)(d.Z,{children:[(0,I.jsx)(o.Z,{xs:12,md:6,className:"create-input",children:(0,I.jsx)(x.Z,{fullWidth:!0,label:Ne("Title"),color:"",error:!1===ge.title&&te,type:"search",value:P,onChange:function(e){var t=e.target.value;t.length>25||t.match(/['\-"><;:\\+{}!@#$%=^*_|[\]]/)||(je((function(e){return(0,l.Z)((0,l.Z)({},e),{},{title:""!==t})})),k(t))}})}),(0,I.jsx)(o.Z,{xs:12,md:6,className:"create-input",children:(0,I.jsx)(x.Z,{fullWidth:!0,label:Ne("Price"),color:"",error:!1===ge.price&&te,type:"number",value:G,onChange:function(e){var t=e.target.value;t.match(/[-]/)||(je((function(e){return(0,l.Z)((0,l.Z)({},e),{},{price:""!==t})})),J(t))}})}),(0,I.jsx)(o.Z,{xs:12,md:6,className:"create-input",children:(0,I.jsxs)(g.Z,{fullWidth:!0,error:!1===ge.brand&&te,children:[(0,I.jsx)(N.Z,{id:"brand-label",children:Ne("Brand")}),(0,I.jsx)(y.Z,{labelId:"brand-label",id:"brand-select",label:"Brand",defaultValue:"",value:z,onChange:function(e){var t=e.target.value;""!==t&&je((function(e){return(0,l.Z)((0,l.Z)({},e),{},{brand:!0})})),M(t)},children:Ce(f.YS,"brand")})]})}),(0,I.jsx)(o.Z,{xs:12,md:6,className:"create-input",children:(0,I.jsxs)(g.Z,{fullWidth:!0,error:!1===ge.sale&&te,children:[(0,I.jsx)(N.Z,{id:"sale-type-label",children:Ne("Sale Type")}),(0,I.jsx)(y.Z,{labelId:"sale-type-label",id:"sale-type-select",label:Ne("Sale Type"),defaultValue:"",value:T,onChange:function(e){var t=e.target.value;""!==t&&je((function(e){return(0,l.Z)((0,l.Z)({},e),{},{sale:!0})})),U(t)},children:Ce(f.V5,"type")})]})}),(0,I.jsx)(o.Z,{xs:12,md:6,className:"create-input",children:(0,I.jsxs)(g.Z,{fullWidth:!0,error:!1===ge.condition&&te,children:[(0,I.jsx)(N.Z,{id:"condition-label",children:Ne("Condition")}),(0,I.jsx)(y.Z,{labelId:"condition-label",id:"condition-select",label:Ne("Condition"),defaultValue:"",value:E,onChange:function(e){var t=e.target.value;""!==t&&je((function(e){return(0,l.Z)((0,l.Z)({},e),{},{condition:!0})})),H(t)},children:Ce([1,2,3,4,5,6,7,8,9,10],"condition")})]})}),(0,I.jsx)(o.Z,{xs:12,md:6,className:"create-input",children:(0,I.jsxs)(g.Z,{fullWidth:!0,error:!1===ge.blade&&te,children:[(0,I.jsx)(N.Z,{id:"blade-label",children:Ne("Blade")}),(0,I.jsx)(y.Z,{labelId:"blade-label",id:"blade-select",label:Ne("Blade"),defaultValue:"",value:q,onChange:function(e){var t=e.target.value;""!==t&&je((function(e){return(0,l.Z)((0,l.Z)({},e),{},{blade:!0})})),Q(t)},children:Ce(f.SP,"blade")})]})})]}),(0,I.jsx)(d.Z,{children:(0,I.jsx)(o.Z,{xs:12,children:(0,I.jsx)(S.Z,{style:{width:"100%"},minRows:5,value:O,placeholder:Ne("Description"),label:Ne("Description"),onChange:function(e){var t=e.target.value;t.length>425||t.match(/[\-><;:\\+{}@%=^*_|[\]]/)||D(t)}})})}),(0,I.jsxs)(d.Z,{children:[(0,I.jsx)(o.Z,{xs:"12",className:"setting-item center",children:(0,I.jsxs)("label",{className:"profile-label",htmlFor:"inputPicture-default",children:[(0,I.jsx)("b",{children:Ne("Upload Image")}),(0,I.jsx)("input",{id:"inputPicture-default",className:"profile-input",type:"file",onChange:function(e){var t;(t=e).target.files&&t.target.files[0]&&(ue((function(e){return[].concat((0,i.Z)(e),[URL.createObjectURL(t.target.files[0])])})),ie((function(e){return[].concat((0,i.Z)(e),[t.target.files[0]])})),ve((function(e){return e+1})),je((function(e){return(0,l.Z)((0,l.Z)({},e),{},{picture:!0})})))},accept:"/image/*"}),(0,I.jsx)("br",{}),(0,I.jsx)(p.H3h,{size:70,className:""})]})}),function(){for(var e=[],t=function(t){var a,n,r,i;e.push((0,I.jsx)(o.Z,{xs:"12",className:"setting-item center",children:(0,I.jsxs)("label",{className:"profile-label",htmlFor:"inputPicture-"+(null===(n=le[t])||void 0===n?void 0:n.name),onClick:function(){return function(e){for(var t=[],a=[],n=0;n<oe.length;n++)e!==n&&(t.push(oe[n]),a.push(le[n]));ue(t),ie(a),ve((function(e){return e-1})),Ze-1===0&&je((function(e){return(0,l.Z)((0,l.Z)({},e),{},{picture:!1})}))}(t)},children:[(0,I.jsx)("span",{children:null===(r=le[t])||void 0===r?void 0:r.name}),(0,I.jsx)("br",{}),(0,I.jsx)("img",{id:"inputPicture-"+(null===(i=le[t])||void 0===i?void 0:i.name),src:oe[t],className:"upload-image",alt:"preview image"})]})},null===(a=le[t])||void 0===a?void 0:a.name))},a=0;a<le.length;a++)t(a);return e}()]}),(0,I.jsx)(d.Z,{children:(0,I.jsx)(o.Z,{xs:12,className:"center",children:(0,I.jsx)(h.Z,{disabled:te,className:"create-submit-button",onClick:Se,children:Ne("Submit")})})})]})]}),Pe=(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(u.Z,{className:"create-header-container",children:(0,I.jsx)(d.Z,{children:(0,I.jsx)(o.Z,{className:"create-header",children:(0,I.jsx)("h2",{children:Ne("Information Missing")})})})}),(0,I.jsx)(u.Z,{className:"create-container",children:(0,I.jsx)(d.Z,{children:(0,I.jsx)(o.Z,{xs:12,children:(0,I.jsx)("h3",{children:e[0]?"Please go to the <a href='/settings'>Settings Page</a> to make sure you have a first name, last name and display name saved before trying to create a post.":"Please login before trying to create a post."})})})})]});return e[0]?Ie:Pe},k=P},6157:function(e,t,a){a.d(t,{Z:function(){return Z}});var n=a(1413),r=a(9439),l=a(5987),i=a(1694),s=a.n(i),c=a(2791),o=a(184),u=["as","disabled"];function d(e){var t=e.tagName,a=e.disabled,n=e.href,r=e.target,l=e.rel,i=e.role,s=e.onClick,c=e.tabIndex,o=void 0===c?0:c,u=e.type;t||(t=null!=n||null!=r||null!=l?"a":"button");var d={tagName:t};if("button"===t)return[{type:u||"button",disabled:a},d];var h=function(e){(a||"a"===t&&function(e){return!e||"#"===e.trim()}(n))&&e.preventDefault(),a?e.stopPropagation():null==s||s(e)};return"a"===t&&(n||(n="#"),a&&(n=void 0)),[{role:null!=i?i:"button",disabled:void 0,tabIndex:a?void 0:o,href:n,target:"a"===t?r:void 0,"aria-disabled":a||void 0,rel:"a"===t?l:void 0,onClick:h,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),h(e))}},d]}var h=c.forwardRef((function(e,t){var a=e.as,n=e.disabled,l=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,u),i=d(Object.assign({tagName:a,disabled:n},l)),s=(0,r.Z)(i,2),c=s[0],h=s[1].tagName;return(0,o.jsx)(h,Object.assign({},l,c,{ref:t}))}));h.displayName="Button";var f=a(162),b=["as","bsPrefix","variant","size","active","className"],m=c.forwardRef((function(e,t){var a=e.as,i=e.bsPrefix,c=e.variant,u=e.size,h=e.active,m=e.className,Z=(0,l.Z)(e,b),v=(0,f.vE)(i,"btn"),p=d((0,n.Z)({tagName:a},Z)),x=(0,r.Z)(p,2),g=x[0],j=x[1].tagName;return(0,o.jsx)(j,(0,n.Z)((0,n.Z)((0,n.Z)({},g),Z),{},{ref:t,className:s()(m,v,h&&"active",c&&"".concat(v,"-").concat(c),u&&"".concat(v,"-").concat(u),Z.href&&Z.disabled&&"disabled")}))}));m.displayName="Button",m.defaultProps={variant:"primary",active:!1,disabled:!1};var Z=m}}]);
//# sourceMappingURL=979.1cf643a0.chunk.js.map