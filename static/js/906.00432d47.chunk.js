"use strict";(self.webpackChunkbalisales=self.webpackChunkbalisales||[]).push([[906],{8679:function(e,n,t){t.d(n,{Z:function(){return p}});var i=t(4165),l=t(5861),s=t(885),a=t(2791),r=t(7342),c=t(9743),o=t(2677),d=t(6788),u=t(1089),h=t(4894),m=t(4453),x=t(9062),f=t(2892),Z=t(184);var p=function(e){var n=e.user,t=e.accountView,p=(0,a.useState)([]),j=(0,s.Z)(p,2),v=j[0],g=j[1];(0,a.useEffect)((function(){(0,h.ww)(n).then((function(e){g(e)})).catch((function(){console.error("cant get user posts")}))}),[]);var b=function(){var e=(0,l.Z)((0,i.Z)().mark((function e(n){var t,l,s,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,m.cF)(),l=(0,x.JU)(f.db,"posts",n.id),e.next=4,(0,x.oe)(l);case 4:(0,h.sq)(n.id),s=0;case 6:if(!(s<n.numberOfImages)){e.next=13;break}return a=(0,m.iH)(t,"PostImages/".concat(n.id,"/image-").concat(s)),e.next=10,(0,m.oq)(a);case 10:s++,e.next=6;break;case 13:g(null===v||void 0===v?void 0:v.filter((function(e){return e.id!==n.id})));case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,Z.jsx)(a.Fragment,{children:function(){if(0===v.length)return(0,Z.jsx)(d.Z,{});for(var e=[],n=[],i=0;i<v.length;i++)n.push(v[i]),(i+1)%3!==0&&i!==v.length-1||(e.push(n),n=[]);return e.length>0&&(0,Z.jsx)(r.ZP,{container:!0,style:{padding:"0px"},className:"grid-container-posts",children:e.map((function(e){return e.map((function(e){return(0,Z.jsx)(u.Z,{item:e,accountView:t,deletePost:b},e.id)}))}))})||(0,Z.jsx)(c.Z,{children:(0,Z.jsx)(o.Z,{xs:12,className:"center",children:"No Posts Available"})})}()})}},906:function(e,n,t){t.r(n);var i=t(8679);n.default=i.Z},1089:function(e,n,t){t.d(n,{Z:function(){return P}});var i=t(885),l=t(2791),s=t(3504),a=t(7342),r=t(4165),c=t(5861),o=t(1083),d=t(6519),u=t(9743),h=t(2677),m=t(6157),x=t(184),f=function(e){var n=e.deletePost,t=e.item,i=e.openDeleteModal,l=e.setOpenDeleteModal;return(0,x.jsx)(d.Z,{open:i,id:"delete-modal",children:(0,x.jsx)(u.Z,{className:"modal-dialog delete-modal",children:(0,x.jsxs)(h.Z,{xs:5,sm:5,md:2,className:"modal-content modal-background center",children:[(0,x.jsx)(u.Z,{className:"modal-header",children:(0,x.jsx)(h.Z,{className:"modal-title",children:"Do you want to delete this post?"})}),(0,x.jsxs)(u.Z,{children:[(0,x.jsx)(h.Z,{xs:6,children:(0,x.jsx)(m.Z,{onClick:function(){return l(!1)},children:"no"})}),(0,x.jsx)(h.Z,{xs:6,children:(0,x.jsx)(m.Z,{onClick:function(){n(t),l(!1)},children:"yes"})})]})]})})})},Z=t(1747),p=t(4530),j=t(6362),v=t(9891),g=t(4925),b=t(3347),C=t(9062),w=t(2892),N=t(9135),k=t(4453),S=function(e){var n=e.item,t=e.openEditModal,s=e.setOpenEditModal,S=e.deletePost,P=(0,l.useState)(n.title),y=(0,i.Z)(P,2),I=y[0],M=y[1],V=(0,l.useState)(n.description),D=(0,i.Z)(V,2),H=D[0],z=D[1],O=(0,l.useState)(n.type),E=(0,i.Z)(O,2),W=E[0],B=E[1],F=(0,l.useState)(n.brand),R=(0,i.Z)(F,2),U=R[0],q=R[1],J=(0,l.useState)(n.condition),T=(0,i.Z)(J,2),A=T[0],L=T[1],Y=(0,l.useState)(n.price),G=(0,i.Z)(Y,2),K=G[0],Q=G[1],X=(0,l.useState)(!1),$=(0,i.Z)(X,2),_=$[0],ee=$[1],ne=(0,l.useState)(n.numberOfImages),te=(0,i.Z)(ne,2),ie=te[0],le=(te[1],(0,l.useState)({})),se=(0,i.Z)(le,2),ae=se[0],re=se[1],ce=(0,l.useState)(""),oe=(0,i.Z)(ce,2),de=(oe[0],oe[1]);var ue=function(e){return e.map((function(e,n){return(0,x.jsx)("option",{value:e,children:e},n)}))},he=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,C.JU)(w.db,"posts",n.id),e.next=3,(0,C.pl)(t,{title:I,type:W,brand:U,condition:A,price:K,description:H,timeStamp:Date.now(),numberOfImages:ie,author:{name:n.author.name,id:n.author.id}}).then((function(){var e=(0,k.iH)((0,k.cF)(),"PostImages/".concat(n.id,"/image-0"));console.log("pictureRef: ",e)})).catch((function(e){console.error("problem: ",e)})).finally((function(){window.location.reload()}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();a.ZP,n.urls.map((function(e){return(0,x.jsx)(a.ZP,{item:!0,className:"center",style:{backgroundImage:"url(".concat(e,")"),backgroundSize:"100% 100%",width:"100px",height:"100px"},onClick:function(){return function(e){re((function(n){var t;return n[e]=null===(t=!n[e])||void 0===t||t,n})),console.log(ae)}(e)},children:ae[e]},e)})),u.Z,h.Z,N.H3h;return(0,x.jsx)(d.Z,{open:t,children:(0,x.jsx)(u.Z,{className:"edit-modal",children:(0,x.jsxs)(h.Z,{xs:7,className:"modal-background center",children:[(0,x.jsx)(f,{deletePost:S,item:n,openDeleteModal:_,setOpenDeleteModal:ee}),(0,x.jsxs)(u.Z,{className:"edit-input",children:[(0,x.jsx)(h.Z,{xs:6,sm:9,className:"left",children:(0,x.jsx)("h2",{children:"Edit"})}),(0,x.jsx)(h.Z,{xs:6,sm:3,children:(0,x.jsx)(m.Z,{variant:"danger",onClick:function(e){e.preventDefault(),ee(!0)},children:"Delete"})})]}),(0,x.jsx)(u.Z,{className:"edit-input",children:(0,x.jsx)(p.Z,{fullWidth:!0,size:"small",value:I,label:"Title",className:"input-width",color:"",onChange:function(e){return M(e.target.value)}})}),(0,x.jsx)(u.Z,{className:"edit-input",children:(0,x.jsx)(p.Z,{fullWidth:!0,size:"small",value:K,label:"Price",className:"input-width",color:"",onChange:function(e){return Q(e.target.value)}})}),(0,x.jsx)(u.Z,{className:"edit-input",children:(0,x.jsxs)(j.Z,{fullWidth:!0,children:[(0,x.jsx)(g.Z,{size:"small",id:"brand-label",children:"Brand"}),(0,x.jsxs)(b.Z,{labelId:"brand-label",id:"brand-select",size:"small",value:U,label:"Brand",onChange:function(e){return q(e.target.value)},children:[(0,x.jsx)(v.Z,{value:"default",children:"default"}),ue(o.YS)]})]})}),(0,x.jsx)(u.Z,{className:"edit-input",children:(0,x.jsxs)(j.Z,{fullWidth:!0,children:[(0,x.jsx)(g.Z,{size:"small",id:"business-label",children:"Business"}),(0,x.jsxs)(b.Z,{labelId:"business-label",id:"business-select",size:"small",value:W,label:"Type",onChange:function(e){return B(e.target.value)},children:[(0,x.jsx)(v.Z,{value:"default",children:"select"}),ue(o.V5)]})]})}),(0,x.jsx)(u.Z,{className:"edit-input",children:(0,x.jsxs)(j.Z,{fullWidth:!0,children:[(0,x.jsx)(g.Z,{size:"small",id:"condition-label",children:"Condition"}),(0,x.jsxs)(b.Z,{labelId:"condition-label",id:"condition-select",size:"small",value:A,label:"Condition",onChange:function(e){return L(e.target.value)},children:[(0,x.jsx)(v.Z,{value:"default",children:"default"}),ue([1,2,3,4,5,6,7,8,9,10])]})]})}),(0,x.jsx)(u.Z,{className:"edit-input",children:(0,x.jsx)(Z.Z,{fullwidth:"true",minRows:3,value:H,placeholder:"Description",label:"description",onChange:function(e){return z(e.target.value)}})}),(0,x.jsxs)(u.Z,{className:"edit-input",children:[(0,x.jsx)(h.Z,{xs:6,children:(0,x.jsx)(m.Z,{onClick:function(){return s(!1)},children:"Cancel"})}),(0,x.jsx)(h.Z,{xs:6,children:(0,x.jsx)(m.Z,{onClick:function(){he(),s(!1)},children:"Submit"})})]})]})})})};var P=function(e){var n=e.item,t=e.viewCount,r=e.accountView,c=e.deletePost,o=(0,l.useState)(!1),d=(0,i.Z)(o,2),u=d[0],h=d[1],m="id="+(null===n||void 0===n?void 0:n.id),f=isNaN(12/t);return(0,x.jsxs)(l.Fragment,{children:[(0,x.jsx)(S,{item:n,openEditModal:u,setOpenEditModal:h,deletePost:c}),(0,x.jsx)(a.ZP,{item:!0,className:"post-container",style:{backgroundImage:"url(".concat(null===n||void 0===n?void 0:n.urls[0],")")},id:null===n||void 0===n?void 0:n.id,xs:f?4:12/t,children:(0,x.jsx)(s.rU,{className:"link",to:!r&&{pathname:"/singlePost",search:m},onClick:r&&function(e){e.preventDefault(),h(!0)},children:(null===n||void 0===n?void 0:n.numberOfImages)>1&&(0,x.jsx)("svg",{style:{marginLeft:"auto",marginRight:"1vw",width:"5vw",height:"5vw",color:"white"},viewBox:"0 0 24 24",children:(0,x.jsx)("path",{fill:"currentColor",d:"M21 16V6H7V16H21M21 4C21.53 4 22.04 4.21 22.41 4.59C22.79 4.96 23 5.47 23 6V16C23 16.53 22.79 17.04 22.41 17.41C22.04 17.79 21.53 18 21 18H7C5.89 18 5 17.1 5 16V6C5 4.89 5.89 4 7 4H21M3 20H18V22H3C2.47 22 1.96 21.79 1.59 21.41C1.21 21.04 1 20.53 1 20V9H3V20Z"})})})})]})}}}]);
//# sourceMappingURL=906.00432d47.chunk.js.map