"use strict";(self.webpackChunkbalisales=self.webpackChunkbalisales||[]).push([[269],{4269:function(e,r,n){n.r(r),n.d(r,{default:function(){return $}});var t=n(9439),a=n(2791),s=n(7022),c=n(9743),i=n(1413),o=n(5987),l=n(1694),d=n.n(l),u=n(162),m=n(6543),x=n(7472),f=n(184),p=["bsPrefix","className","variant","as"],h=a.forwardRef((function(e,r){var n=e.bsPrefix,t=e.className,a=e.variant,s=e.as,c=void 0===s?"img":s,l=(0,o.Z)(e,p),m=(0,u.vE)(n,"card-img");return(0,f.jsx)(c,(0,i.Z)({ref:r,className:d()(a?"".concat(m,"-").concat(a):m,t)},l))}));h.displayName="CardImg";var Z=h,v=a.createContext(null);v.displayName="CardHeaderContext";var b=v,j=["bsPrefix","className","as"],N=a.forwardRef((function(e,r){var n=e.bsPrefix,t=e.className,s=e.as,c=void 0===s?"div":s,l=(0,o.Z)(e,j),m=(0,u.vE)(n,"card-header"),x=(0,a.useMemo)((function(){return{cardHeaderBsPrefix:m}}),[m]);return(0,f.jsx)(b.Provider,{value:x,children:(0,f.jsx)(c,(0,i.Z)((0,i.Z)({ref:r},l),{},{className:d()(t,m)}))})}));N.displayName="CardHeader";var g=N,y=["bsPrefix","className","bg","text","border","body","children","as"],w=(0,x.Z)("h5"),C=(0,x.Z)("h6"),k=(0,m.Z)("card-body"),S=(0,m.Z)("card-title",{Component:w}),P=(0,m.Z)("card-subtitle",{Component:C}),I=(0,m.Z)("card-link",{Component:"a"}),R=(0,m.Z)("card-text",{Component:"p"}),E=(0,m.Z)("card-footer"),T=(0,m.Z)("card-img-overlay"),H=a.forwardRef((function(e,r){var n=e.bsPrefix,t=e.className,a=e.bg,s=e.text,c=e.border,l=e.body,m=e.children,x=e.as,p=void 0===x?"div":x,h=(0,o.Z)(e,y),Z=(0,u.vE)(n,"card");return(0,f.jsx)(p,(0,i.Z)((0,i.Z)({ref:r},h),{},{className:d()(t,Z,a&&"bg-".concat(a),s&&"text-".concat(s),c&&"border-".concat(c)),children:l?(0,f.jsx)(k,{children:m}):m}))}));H.displayName="Card",H.defaultProps={body:!1};var J=Object.assign(H,{Img:Z,Title:S,Subtitle:P,Body:k,Link:I,Text:R,Header:g,Footer:E,ImgOverlay:T}),z=n(2677),B=n(6151),D=n(7391),L=n(3433),O=n(4165),U=n(5861),F=n(9062),M=n(2892),W=n(3675),q=localStorage.getItem("uid"),A=localStorage.getItem("displayName"),G=(0,W.NZ)()+"-discussions",K=function(){var e=(0,U.Z)((0,O.Z)().mark((function e(r){var n;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,F.hJ)(M.db,G),e.next=3,(0,F.ET)(n,{body:r,comments:[],timeStamp:Date.now(),displayName:A||"none",userId:q||"none"}).then((function(e){console.log(e)})).catch((function(e){console.error(e)}));case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),Q=function(){var e=(0,U.Z)((0,O.Z)().mark((function e(){var r,n,t;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,F.hJ)(M.db,G),e.next=3,(0,F.PL)(r);case 3:return n=e.sent,t=n.docs.map(function(){var e=(0,U.Z)((0,O.Z)().mark((function e(r){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.Z)((0,i.Z)({},r.data()),{},{id:r.id}));case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),e.abrupt("return",Promise.all(t));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=(0,U.Z)((0,O.Z)().mark((function e(r,n){var t;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,F.JU)(M.db,G,r.id),e.next=3,(0,F.pl)(t,(0,i.Z)((0,i.Z)({},r),{},{comments:[].concat((0,L.Z)(r.comments),[{comment:n,displayName:A,uid:q}])})).then((function(e){console.log("result: ",e)}));case 3:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),X=function(){var e=(0,U.Z)((0,O.Z)().mark((function e(r,n){var t;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,F.JU)(M.db,G,r.id),r.comments.splice(n,1),e.next=4,(0,F.pl)(t,r).then((function(e){console.log("result: ",e)}));case 4:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),Y=localStorage.getItem("uid"),$=function(){var e=(0,a.useState)(""),r=(0,t.Z)(e,2),n=r[0],i=r[1],o=(0,a.useState)([]),l=(0,t.Z)(o,2),d=l[0],u=l[1],m=(0,a.useState)(""),x=(0,t.Z)(m,2),p=x[0],h=x[1];return(0,a.useEffect)((function(){Q().then((function(e){e.sort((function(e,r){return r.timeStamp-e.timeStamp})),u(e.map((function(e){return e})))}))}),[]),(0,f.jsxs)(s.Z,{className:"discuss-container",children:[(0,f.jsx)(c.Z,{children:(0,f.jsx)("div",{className:"card-group",children:(0,f.jsxs)(J,{children:[(0,f.jsx)("div",{className:"card-header",children:(0,f.jsx)("h3",{children:"Create Discussion"})}),(0,f.jsx)("div",{className:"card-body center",children:(0,f.jsx)("textarea",{rows:"4",style:{width:"100%",height:"100%"},onChange:function(e){return i(e.target.value)}})}),(0,f.jsx)("div",{className:"card-footer center",children:Y?(0,f.jsx)("button",{className:"btn btn-primary",onClick:function(){return K(n)},children:"submit"}):"please login to create discussion"})]})})}),(0,f.jsx)(c.Z,{children:(0,f.jsx)("div",{style:{marginTop:"20px"},children:d.map((function(e){var r;return(0,f.jsxs)("div",{className:"card",style:{margin:"20px 0 20px 0"},children:[(0,f.jsx)("div",{className:"card-header",children:(0,f.jsxs)(c.Z,{children:[(0,f.jsx)(z.Z,{xs:11,children:null===e||void 0===e?void 0:e.displayName}),e.userId===Y&&(0,f.jsx)(z.Z,{xs:1,className:"full-center",children:(0,f.jsx)(B.Z,{color:"error",children:"x"})})]})}),(0,f.jsx)("h4",{className:"card-text discussion-comment",children:null===e||void 0===e?void 0:e.body}),(0,f.jsxs)("div",{className:"card-footer",children:[null===e||void 0===e||null===(r=e.comments)||void 0===r?void 0:r.map((function(r,n){return(0,f.jsx)(c.Z,{className:"comment-container",children:(0,f.jsxs)(z.Z,{xs:12,className:"dialog-text",children:[(0,f.jsxs)(c.Z,{style:{fontSize:"12px"},xs:2,children:[(0,f.jsx)(z.Z,{xs:11,children:r.displayName}),(0,f.jsx)(z.Z,{xs:1,className:"full-center",style:{paddingRight:"0px"},children:r.uid===Y&&(0,f.jsx)(B.Z,{color:"error",style:{fontSize:"9px",borderTopRightRadius:"0px"},onClick:function(){return X(e,n)},children:"x"})})]}),(0,f.jsx)(c.Z,{style:{margin:"5px 0px 5px 0px"},xs:8,children:r.comment})]})},"comment+"+e.id+n)})),Y&&(0,f.jsxs)(c.Z,{className:"add-comment-container",children:[(0,f.jsx)(z.Z,{xs:9,sm:10,lg:11,children:(0,f.jsx)(D.Z,{fullWidth:!0,label:"comment",color:"",onChange:function(e){return h(e.target.value)}})}),(0,f.jsx)(z.Z,{xs:3,sm:2,lg:1,className:"full-center",children:(0,f.jsx)(B.Z,{className:"btn btn-primary",style:{fontSize:"10px"},onClick:function(){V(e,p)},children:"Comment"})})]})]})]},e.id)}))})})]})}},7472:function(e,r,n){var t=n(1413),a=n(2791),s=n(1694),c=n.n(s),i=n(184);r.Z=function(e){return a.forwardRef((function(r,n){return(0,i.jsx)("div",(0,t.Z)((0,t.Z)({},r),{},{ref:n,className:c()(r.className,e)}))}))}}}]);
//# sourceMappingURL=269.3aeb6fdf.chunk.js.map