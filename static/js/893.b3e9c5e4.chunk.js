"use strict";(self.webpackChunkbalisales=self.webpackChunkbalisales||[]).push([[893],{3893:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var i=n(1413),a=n(4165),l=n(5861),s=n(9439),d=n(2791),r=n(3675),o=n(6519),u=n(9743),c=n(2677),v=n(6157),f=n(9230),b=n(184),h=function(e){var t=e.deletePost,n=e.item,i=e.openDeleteModal,a=e.setOpenDeleteModal,l=e.setOpenEditModal,s=(0,f.$G)().t;return(0,b.jsx)(o.Z,{open:i,id:"delete-modal",children:(0,b.jsx)(u.Z,{className:"modal-dialog delete-modal",children:(0,b.jsxs)(c.Z,{xs:5,sm:5,md:2,className:"modal-content modal-background center",children:[(0,b.jsx)(u.Z,{className:"modal-header",children:(0,b.jsx)(c.Z,{className:"modal-title",children:s("Do you want to delete this post?")})}),(0,b.jsxs)(u.Z,{children:[(0,b.jsx)(c.Z,{xs:6,children:(0,b.jsx)(v.Z,{onClick:function(){return a(!1)},children:s("No")})}),(0,b.jsx)(c.Z,{xs:6,children:(0,b.jsx)(v.Z,{onClick:function(){t(n).then((function(){return l(!1)})),a(!1)},children:s("Yes")})})]})]})})})},Z=n(9891),m=n(1747),p=n(7391),x=n(6362),j=n(4925),g=n(26),N=n(9062),y=n(2892),k=n(4894),C=n(4453),S=function(e){var t=e.item,n=e.openEditModal,S=e.setOpenEditModal,w=e.filterPosts,z=e.setFilterPosts,D=(0,d.useState)(null===t||void 0===t?void 0:t.title),O=(0,s.Z)(D,2),I=O[0],P=O[1],M=(0,d.useState)(null===t||void 0===t?void 0:t.description),E=(0,s.Z)(M,2),W=E[0],B=E[1],V=(0,d.useState)(null===t||void 0===t?void 0:t.type),R=(0,s.Z)(V,2),$=R[0],F=R[1],T=(0,d.useState)(null===t||void 0===t?void 0:t.blade),q=(0,s.Z)(T,2),G=q[0],H=q[1],J=(0,d.useState)(null===t||void 0===t?void 0:t.brand),U=(0,s.Z)(J,2),Y=U[0],_=U[1],K=(0,d.useState)(null===t||void 0===t?void 0:t.condition),A=(0,s.Z)(K,2),L=A[0],Q=A[1],X=(0,d.useState)(null===t||void 0===t?void 0:t.price),ee=(0,s.Z)(X,2),te=ee[0],ne=ee[1],ie=(0,d.useState)(null===t||void 0===t?void 0:t.status),ae=(0,s.Z)(ie,2),le=ae[0],se=ae[1],de=(0,d.useState)(!1),re=(0,s.Z)(de,2),oe=re[0],ue=re[1],ce=(0,d.useState)(!1),ve=(0,s.Z)(ce,2),fe=ve[0],be=ve[1],he=(0,d.useState)({title:!0,type:!0,blade:!0,brand:!0,condition:!0,price:!0,status:!0}),Ze=(0,s.Z)(he,2),me=Ze[0],pe=Ze[1],xe=(0,f.$G)().t;(0,d.useEffect)((function(){var e=!1;return e||(P(null===t||void 0===t?void 0:t.title),B(null===t||void 0===t?void 0:t.description),F(null===t||void 0===t?void 0:t.type),H(null===t||void 0===t?void 0:t.blade),_(null===t||void 0===t?void 0:t.brand),Q(null===t||void 0===t?void 0:t.condition),ne(null===t||void 0===t?void 0:t.price),se(null===t||void 0===t?void 0:t.status)),function(){return e=!0}}),[t]);var je=(0,d.useMemo)((function(){var e=!Object.values(me).some((function(e){return!1===e}));return!0===e&&be(!1),e}),[me]),ge=function(e,t){return e.map((function(e){return(0,b.jsx)(Z.Z,{value:e,children:xe(e)},t+"-"+e)}))},Ne=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(je){e.next=2;break}return e.abrupt("return");case 2:return n=(0,N.JU)(y.db,"posts",t.id),e.next=5,(0,N.pl)(n,{title:I,type:$,blade:G,brand:Y,condition:L,price:te,description:W,status:le,timeStamp:Date.now(),numberOfImages:t.numberOfImages,author:{name:t.author.name,id:t.author.id}}).then((function(){var e=(0,C.iH)((0,C.cF)(),"postImages/".concat(t.id,"/image-0"));console.log("pictureRef: ",e)})).catch((function(e){console.error("problem: ",e)})).finally((function(){window.location.reload()}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t){var n,i,l,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,C.cF)(),i=(0,N.JU)(y.db,"posts",t.id),e.next=4,(0,N.oe)(i);case 4:(0,k.sq)(t.id),l=0;case 6:if(!(l<t.numberOfImages)){e.next=13;break}return s=(0,C.iH)(n,"".concat((0,r.NZ)(),"-postImages/").concat(t.id,"/image-").concat(l)),e.next=10,(0,C.oq)(s);case 10:l++,e.next=6;break;case 13:z(null===w||void 0===w?void 0:w.filter((function(e){return e.id!==t.id})));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,b.jsx)(o.Z,{open:n,children:(0,b.jsx)(u.Z,{className:"edit-modal",children:(0,b.jsxs)(c.Z,{xs:7,className:"modal-background center",children:[(0,b.jsx)(h,{deletePost:ye,item:t,openDeleteModal:oe,setOpenDeleteModal:ue,setOpenEditModal:S}),(0,b.jsxs)(u.Z,{className:"edit-input",children:[(0,b.jsx)(c.Z,{xs:6,sm:9,className:"left",children:(0,b.jsx)("h2",{children:xe("Edit")})}),(0,b.jsx)(c.Z,{xs:6,sm:3,children:(0,b.jsx)(v.Z,{variant:"danger",onClick:function(e){e.preventDefault(),ue(!0)},children:xe("Delete")})})]}),(0,b.jsx)(u.Z,{className:"edit-input",children:(0,b.jsx)(p.Z,{error:!me.title,fullWidth:!0,size:"small",value:I,label:xe("Title"),className:"input-width",onChange:function(e){var t=e.target.value;t.match(/['\-"><;:\\+{}!@#$%=^*_|[\]]/)||(pe((function(e){return(0,i.Z)((0,i.Z)({},e),{},{title:""!==t})})),P(t))}})}),(0,b.jsx)(u.Z,{className:"edit-input",children:(0,b.jsx)(p.Z,{fullWidth:!0,size:"small",value:te,type:"number",label:xe("Price"),className:"input-width",onChange:function(e){var t=e.target.value;t.match(/['\-"]/)||(pe((function(e){return(0,i.Z)((0,i.Z)({},e),{},{price:""!==t})})),ne(t))}})}),(0,b.jsx)(u.Z,{className:"edit-input",children:(0,b.jsxs)(x.Z,{fullWidth:!0,children:[(0,b.jsx)(j.Z,{error:!1===me.brand&&fe,size:"small",id:"brand-edit-label",children:xe("Brand")}),(0,b.jsx)(g.Z,{labelId:"brand-edit-label",id:"brand-edit-select",size:"small",defaultValue:null===t||void 0===t?void 0:t.brand,value:Y,label:xe("Brand"),onChange:function(e){var t=e.target.value;""!==t&&pe((function(e){return(0,i.Z)((0,i.Z)({},e),{},{brand:!0})})),_(t)},children:ge(r.YS,"brand")})]})}),(0,b.jsx)(u.Z,{className:"edit-input",children:(0,b.jsxs)(x.Z,{fullWidth:!0,error:!1===me.blade&&fe,children:[(0,b.jsx)(j.Z,{id:"blade-edit-label",size:"small",children:xe("Blade")}),(0,b.jsx)(g.Z,{labelId:"blade-edit-label",id:"blade-edit-select",size:"small",defaultValue:null===t||void 0===t?void 0:t.blade,value:G,label:xe("Blade"),onChange:function(e){var t=e.target.value;""!==t&&pe((function(e){return(0,i.Z)((0,i.Z)({},e),{},{blade:!0})})),H(t)},children:ge(r.SP,"blade")})]})}),(0,b.jsx)(u.Z,{className:"edit-input",children:(0,b.jsxs)(x.Z,{fullWidth:!0,children:[(0,b.jsx)(j.Z,{error:!1===me.type&&fe,size:"small",id:"business-edit-label",children:xe("Sale Type")}),(0,b.jsx)(g.Z,{labelId:"business-edit-label",id:"business-edit-select",size:"small",defaultValue:null===t||void 0===t?void 0:t.type,value:$,label:xe("Sale Type"),onChange:function(e){var t=e.target.value;""!==t&&pe((function(e){return(0,i.Z)((0,i.Z)({},e),{},{type:!0})})),F(t)},children:ge(r.V5,"type")})]})}),(0,b.jsx)(u.Z,{className:"edit-input",children:(0,b.jsxs)(x.Z,{fullWidth:!0,children:[(0,b.jsx)(j.Z,{error:!1===me.condition&&fe,size:"small",id:"condition-edit-label",children:xe("Condition")}),(0,b.jsx)(g.Z,{labelId:"condition-edit-label",id:"condition-edit-select",size:"small",defaultValue:null===t||void 0===t?void 0:t.condition,value:L,label:xe("Condition"),onChange:function(e){var t=e.target.value;""!==t&&pe((function(e){return(0,i.Z)((0,i.Z)({},e),{},{condition:!0})})),Q(t)},children:ge([1,2,3,4,5,6,7,8,9,10],"condition")})]})}),(0,b.jsx)(u.Z,{className:"edit-input",children:(0,b.jsxs)(x.Z,{fullWidth:!0,children:[(0,b.jsx)(j.Z,{error:!1===me.status&&fe,size:"small",id:"status-edit-label",children:xe("Status")}),(0,b.jsx)(g.Z,{labelId:"status-edit-label",id:"status-edit-select",size:"small",defaultValue:null===t||void 0===t?void 0:t.status,value:le,label:xe("Status"),onChange:function(e){var t=e.target.value;""!==t&&pe((function(e){return(0,i.Z)((0,i.Z)({},e),{},{status:!0})})),se(t)},children:ge(r.Do,"status")})]})}),(0,b.jsx)(u.Z,{className:"edit-input",children:(0,b.jsx)(m.Z,{fullwidth:"true",minRows:3,value:W,placeholder:xe("Description"),label:xe("Description"),onChange:function(e){var t=e.target.value;t.match(/['\-"><;:\\+{}!@#$%=^*_|[\]]/)||B(t)}})}),(0,b.jsxs)(u.Z,{className:"edit-input",children:[(0,b.jsx)(c.Z,{xs:6,children:(0,b.jsx)(v.Z,{onClick:function(){S(!1)},children:xe("Cancel")})}),(0,b.jsx)(c.Z,{xs:6,children:(0,b.jsx)(v.Z,{disabled:fe,onClick:function(){je?(Ne(),S(!1)):be(!0)},children:xe("Submit")})})]})]})})})},w=S},6157:function(e,t,n){n.d(t,{Z:function(){return Z}});var i=n(1413),a=n(9439),l=n(5987),s=n(1694),d=n.n(s),r=n(2791),o=n(184),u=["as","disabled"];function c(e){var t=e.tagName,n=e.disabled,i=e.href,a=e.target,l=e.rel,s=e.role,d=e.onClick,r=e.tabIndex,o=void 0===r?0:r,u=e.type;t||(t=null!=i||null!=a||null!=l?"a":"button");var c={tagName:t};if("button"===t)return[{type:u||"button",disabled:n},c];var v=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(i))&&e.preventDefault(),n?e.stopPropagation():null==d||d(e)};return"a"===t&&(i||(i="#"),n&&(i=void 0)),[{role:null!=s?s:"button",disabled:void 0,tabIndex:n?void 0:o,href:i,target:"a"===t?a:void 0,"aria-disabled":n||void 0,rel:"a"===t?l:void 0,onClick:v,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),v(e))}},c]}var v=r.forwardRef((function(e,t){var n=e.as,i=e.disabled,l=function(e,t){if(null==e)return{};var n,i,a={},l=Object.keys(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,u),s=c(Object.assign({tagName:n,disabled:i},l)),d=(0,a.Z)(s,2),r=d[0],v=d[1].tagName;return(0,o.jsx)(v,Object.assign({},l,r,{ref:t}))}));v.displayName="Button";var f=n(162),b=["as","bsPrefix","variant","size","active","className"],h=r.forwardRef((function(e,t){var n=e.as,s=e.bsPrefix,r=e.variant,u=e.size,v=e.active,h=e.className,Z=(0,l.Z)(e,b),m=(0,f.vE)(s,"btn"),p=c((0,i.Z)({tagName:n},Z)),x=(0,a.Z)(p,2),j=x[0],g=x[1].tagName;return(0,o.jsx)(g,(0,i.Z)((0,i.Z)((0,i.Z)({},j),Z),{},{ref:t,className:d()(h,m,v&&"active",r&&"".concat(m,"-").concat(r),u&&"".concat(m,"-").concat(u),Z.href&&Z.disabled&&"disabled")}))}));h.displayName="Button",h.defaultProps={variant:"primary",active:!1,disabled:!1};var Z=h}}]);
//# sourceMappingURL=893.b3e9c5e4.chunk.js.map