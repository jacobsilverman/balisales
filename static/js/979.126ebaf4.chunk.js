"use strict";(self.webpackChunkbalisales=self.webpackChunkbalisales||[]).push([[979],{4674:function(e,n,t){t.d(n,{C:function(){return Z}});var a=t(1413),r=t(3433),l=t(9135),i=t(3675),s=t(9743),c=t(2677),o=t(6157),u=t(1889),d=t(7621),h=t(9230),f=t(184),Z=function(e){var n=e.files,t=e.setFiles,Z=e.validation,x=e.setValidation,b=e.disableSubmit,p=(null===n||void 0===n?void 0:n.length)<=1?"200px":"100px",j=(0,h.$G)().t,m=(0,f.jsx)(s.Z,{className:"edit-input",children:(0,f.jsx)(c.Z,{xs:12,className:"setting-item",children:(0,f.jsxs)("label",{className:"profile-label center",style:{color:!1===Z.picture&&b?"red":"black"},htmlFor:"add-post-image",children:[(0,f.jsx)("input",{id:"add-post-image",className:"profile-input",type:"file",onChange:function(e){x((function(e){return(0,a.Z)((0,a.Z)({},e),{},{picture:!0})})),t((function(n){return[].concat((0,r.Z)(n),[e.target.files[0]])}))},accept:"image/*"}),(0,f.jsx)("span",{children:j("Add Picture")}),(0,f.jsx)("br",{}),(0,f.jsx)(l.H3h,{size:40})]})})}),v=(0,f.jsx)(u.ZP,{justifyContent:"center",container:!0,spacing:3,children:null===n||void 0===n?void 0:n.map((function(e,l){var s="string"!==typeof e?URL.createObjectURL(e):e,c=0===l?"flex-end":l!==n.length-1?"space-between":"flex-start";return(0,f.jsx)(u.ZP,{item:!0,children:(0,f.jsxs)(d.Z,{children:[(0,f.jsx)(o.Z,{variant:"danger",style:{width:"100%",borderRadius:"0px"},onClick:function(){return function(e){var r=null===n||void 0===n?void 0:n.filter((function(n,t){return t!==e}));0===r.length&&x((function(e){return(0,a.Z)((0,a.Z)({},e),{},{picture:!1})})),t(r)}(l)},children:j("Remove")}),(0,f.jsx)(u.ZP,{item:!0,className:"center",style:{backgroundImage:"url(".concat(s,")"),backgroundSize:"100% 100%",width:p,height:p}},s),(0,f.jsxs)("div",{style:{display:"flex",justifyContent:c},children:[l>0&&(0,f.jsx)(o.Z,{variant:"outlined",onClick:function(){return function(e){e<=0||t((function(n){var t=(0,r.Z)(n),a=t[e-1];return t[e-1]=t[e],t[e]=a,t}))}(l)},children:i.tq?"^":"<"}),l<n.length-1&&(0,f.jsx)(o.Z,{variant:"outlined",onClick:function(){return function(e){e>=(null===n||void 0===n?void 0:n.length)-1||t((function(n){var t=(0,r.Z)(n),a=t[e+1];return t[e+1]=t[e],t[e]=a,t}))}(l)},children:i.tq?"v":">"})]})]})},s)}))});return(0,f.jsxs)(f.Fragment,{children:[m,v]})}},1822:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var a=t(1413),r=t(4165),l=t(5861),i=t(9439),s=t(2791),c=t(7022),o=t(9743),u=t(2677),d=t(6157),h=t(3675),f=t(6278),Z=t(4674),x=t(9062),b=t(2892),p=t(4453),j=t(7391),m=t(6362),v=t(9891),g=t(4925),y=t(8588),S=t(1747),C=t(9230),N=t(184);var I=function(){var e=(0,s.useState)(localStorage.getItem("isAuth")),n=(0,s.useState)(""),t=(0,i.Z)(n,2),I=t[0],k=t[1],w=(0,s.useState)(""),P=(0,i.Z)(w,2),V=P[0],B=P[1],F=(0,s.useState)(""),W=(0,i.Z)(F,2),R=W[0],T=W[1],O=(0,s.useState)(""),U=(0,i.Z)(O,2),A=U[0],D=U[1],M=(0,s.useState)(""),$=(0,i.Z)(M,2),_=$[0],q=$[1],z=(0,s.useState)(""),G=(0,i.Z)(z,2),H=G[0],L=G[1],E=(0,s.useState)(""),J=(0,i.Z)(E,2),Y=J[0],K=J[1],Q=(0,s.useState)(!1),X=(0,i.Z)(Q,2),ee=X[0],ne=X[1],te=(0,s.useState)([]),ae=(0,i.Z)(te,2),re=ae[0],le=ae[1],ie=(0,s.useState)(0),se=(0,i.Z)(ie,2),ce=(se[0],se[1]),oe=(0,s.useState)({title:!1,price:!1,brand:!1,sale:!1,condition:!1,blade:!1,picture:!1}),ue=(0,i.Z)(oe,2),de=ue[0],he=ue[1],fe=(0,C.$G)().t,Ze=(0,s.useMemo)((function(){var e=!Object.values(de).some((function(e){return!1===e}));return!0===e&&ne(!1),e}),[de]),xe=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(){var n,t,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ne(!0),Ze){e.next=3;break}return e.abrupt("return");case 3:if(re[0]){e.next=6;break}return alert("Please upload an image first!"),e.abrupt("return");case 6:return a=(0,x.hJ)(b.db,"production-posts"),e.next=9,(0,x.ET)(a,{status:"Available",title:I,type:R,blade:Y,brand:A,condition:_,price:H,description:V,numberOfImages:re.length,timeStamp:Date.now(),author:{name:(null===b.I8||void 0===b.I8||null===(n=b.I8.currentUser)||void 0===n?void 0:n.displayName)||"anonymous",id:(null===b.I8||void 0===b.I8||null===(t=b.I8.currentUser)||void 0===t?void 0:t.uid)||"none"}}).then((function(e){var n=[];return re.map((function(t,a){var r=(0,p.iH)(b.tO,"/".concat((0,h.NZ)(),"-postImages/").concat(e.id,"/image-").concat(a)),l=(0,p.B0)(r,t);n.push(l),l.on("state_changed",(function(e){var n=Math.round(e.bytesTransferred/e.totalBytes*100);ce(n)}),(function(e){return console.log(e)}),(function(){console.log(r)}))})),Promise.all(n).then((function(){console.log("all uploaded"),k(""),B(""),T(""),D(""),q(""),L(""),K(""),le([]),ne(!1)})).catch((function(e){console.error(e)})),e})).then((function(e){(0,f.iy)(e.id)})).catch((function(){console.log("error with creating post")}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(e,n){return e.map((function(e){return(0,N.jsx)(v.Z,{value:e,children:fe(e)},n+"-"+e)}))},pe=(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(c.Z,{className:"create-header-container",children:(0,N.jsx)(o.Z,{children:(0,N.jsx)(u.Z,{className:"create-header",children:(0,N.jsx)("h2",{children:fe("Create Post")})})})}),(0,N.jsxs)(c.Z,{className:"create-container",children:[(0,N.jsxs)(o.Z,{children:[(0,N.jsx)(u.Z,{xs:12,md:6,className:"create-input",children:(0,N.jsx)(j.Z,{fullWidth:!0,label:fe("Title"),color:"",error:!1===de.title&&ee,type:"search",value:I,onChange:function(e){var n=e.target.value;n.length>25||n.match(/['\-"><;:\\+{}!@#$%=^*_|[\]]/)||(he((function(e){return(0,a.Z)((0,a.Z)({},e),{},{title:""!==n})})),k(n))}})}),(0,N.jsx)(u.Z,{xs:12,md:6,className:"create-input",children:(0,N.jsx)(j.Z,{fullWidth:!0,label:fe("Price"),color:"",error:!1===de.price&&ee,type:"number",value:H,onChange:function(e){var n=e.target.value;n.match(/[-]/)||(he((function(e){return(0,a.Z)((0,a.Z)({},e),{},{price:""!==n})})),L(n))}})}),(0,N.jsx)(u.Z,{xs:12,md:6,className:"create-input",children:(0,N.jsxs)(m.Z,{fullWidth:!0,error:!1===de.brand&&ee,children:[(0,N.jsx)(g.Z,{id:"brand-label",children:fe("Brand")}),(0,N.jsx)(y.Z,{labelId:"brand-label",id:"brand-select",label:"Brand",defaultValue:"",value:A,onChange:function(e){var n=e.target.value;""!==n&&he((function(e){return(0,a.Z)((0,a.Z)({},e),{},{brand:!0})})),D(n)},children:be(h.YS,"brand")})]})}),(0,N.jsx)(u.Z,{xs:12,md:6,className:"create-input",children:(0,N.jsxs)(m.Z,{fullWidth:!0,error:!1===de.sale&&ee,children:[(0,N.jsx)(g.Z,{id:"sale-type-label",children:fe("Sale Type")}),(0,N.jsx)(y.Z,{labelId:"sale-type-label",id:"sale-type-select",label:fe("Sale Type"),defaultValue:"",value:R,onChange:function(e){var n=e.target.value;""!==n&&he((function(e){return(0,a.Z)((0,a.Z)({},e),{},{sale:!0})})),T(n)},children:be(h.V5,"type")})]})}),(0,N.jsx)(u.Z,{xs:12,md:6,className:"create-input",children:(0,N.jsxs)(m.Z,{fullWidth:!0,error:!1===de.condition&&ee,children:[(0,N.jsx)(g.Z,{id:"condition-label",children:fe("Condition")}),(0,N.jsx)(y.Z,{labelId:"condition-label",id:"condition-select",label:fe("Condition"),defaultValue:"",value:_,onChange:function(e){var n=e.target.value;""!==n&&he((function(e){return(0,a.Z)((0,a.Z)({},e),{},{condition:!0})})),q(n)},children:be([1,2,3,4,5,6,7,8,9,10],"condition")})]})}),(0,N.jsx)(u.Z,{xs:12,md:6,className:"create-input",children:(0,N.jsxs)(m.Z,{fullWidth:!0,error:!1===de.blade&&ee,children:[(0,N.jsx)(g.Z,{id:"blade-label",children:fe("Blade")}),(0,N.jsx)(y.Z,{labelId:"blade-label",id:"blade-select",label:fe("Blade"),defaultValue:"",value:Y,onChange:function(e){var n=e.target.value;""!==n&&he((function(e){return(0,a.Z)((0,a.Z)({},e),{},{blade:!0})})),K(n)},children:be(h.SP,"blade")})]})})]}),(0,N.jsx)(o.Z,{children:(0,N.jsx)(u.Z,{xs:12,children:(0,N.jsx)(S.Z,{style:{width:"100%"},minRows:5,value:V,placeholder:fe("Description"),label:fe("Description"),onChange:function(e){var n=e.target.value;n.length>425||n.match(/[\-><;:\\+{}@%=^*_|[\]]/)||B(n)}})})}),(0,N.jsx)(o.Z,{children:(0,N.jsx)(Z.C,{files:re,setFiles:le,validation:de,setValidation:he,disableSubmit:ee})}),(0,N.jsx)(o.Z,{children:(0,N.jsx)(u.Z,{xs:12,className:"center",children:(0,N.jsx)(d.Z,{disabled:ee,className:"create-submit-button",onClick:xe,children:fe("Submit")})})})]})]}),je=(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(c.Z,{className:"create-header-container",children:(0,N.jsx)(o.Z,{children:(0,N.jsx)(u.Z,{className:"create-header",children:(0,N.jsx)("h2",{children:fe("Information Missing")})})})}),(0,N.jsx)(c.Z,{className:"create-container",children:(0,N.jsx)(o.Z,{children:(0,N.jsx)(u.Z,{xs:12,children:(0,N.jsx)("h3",{children:"Please login before trying to create a post."})})})})]});return"true"===e[0]?pe:je},k=I}}]);
//# sourceMappingURL=979.126ebaf4.chunk.js.map