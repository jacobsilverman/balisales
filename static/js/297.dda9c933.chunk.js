"use strict";(self.webpackChunkbalisales=self.webpackChunkbalisales||[]).push([[297],{1297:function(e,r,n){n.r(r),n.d(r,{default:function(){return X}});var t=n(9439),s=n(2791),a=n(7022),c=n(9743),i=n(1413),o=n(5987),l=n(1694),d=n.n(l),u=n(162),m=n(6543),x=n(184),f=function(e){return s.forwardRef((function(r,n){return(0,x.jsx)("div",(0,i.Z)((0,i.Z)({},r),{},{ref:n,className:d()(r.className,e)}))}))},p=["bsPrefix","className","variant","as"],h=s.forwardRef((function(e,r){var n=e.bsPrefix,t=e.className,s=e.variant,a=e.as,c=void 0===a?"img":a,l=(0,o.Z)(e,p),m=(0,u.vE)(n,"card-img");return(0,x.jsx)(c,(0,i.Z)({ref:r,className:d()(s?"".concat(m,"-").concat(s):m,t)},l))}));h.displayName="CardImg";var Z=h,v=s.createContext(null);v.displayName="CardHeaderContext";var b=v,j=["bsPrefix","className","as"],N=s.forwardRef((function(e,r){var n=e.bsPrefix,t=e.className,a=e.as,c=void 0===a?"div":a,l=(0,o.Z)(e,j),m=(0,u.vE)(n,"card-header"),f=(0,s.useMemo)((function(){return{cardHeaderBsPrefix:m}}),[m]);return(0,x.jsx)(b.Provider,{value:f,children:(0,x.jsx)(c,(0,i.Z)((0,i.Z)({ref:r},l),{},{className:d()(t,m)}))})}));N.displayName="CardHeader";var g=N,y=["bsPrefix","className","bg","text","border","body","children","as"],w=f("h5"),C=f("h6"),k=(0,m.Z)("card-body"),S=(0,m.Z)("card-title",{Component:w}),P=(0,m.Z)("card-subtitle",{Component:C}),I=(0,m.Z)("card-link",{Component:"a"}),R=(0,m.Z)("card-text",{Component:"p"}),E=(0,m.Z)("card-footer"),T=(0,m.Z)("card-img-overlay"),H=s.forwardRef((function(e,r){var n=e.bsPrefix,t=e.className,s=e.bg,a=e.text,c=e.border,l=e.body,m=e.children,f=e.as,p=void 0===f?"div":f,h=(0,o.Z)(e,y),Z=(0,u.vE)(n,"card");return(0,x.jsx)(p,(0,i.Z)((0,i.Z)({ref:r},h),{},{className:d()(t,Z,s&&"bg-".concat(s),a&&"text-".concat(a),c&&"border-".concat(c)),children:l?(0,x.jsx)(k,{children:m}):m}))}));H.displayName="Card",H.defaultProps={body:!1};var J=Object.assign(H,{Img:Z,Title:S,Subtitle:P,Body:k,Link:I,Text:R,Header:g,Footer:E,ImgOverlay:T}),z=n(2677),B=n(6151),D=n(4530),L=n(3433),O=n(4165),U=n(5861),F=n(9062),M=n(2892),W=localStorage.getItem("uid"),q=localStorage.getItem("displayName"),A=function(){var e=(0,U.Z)((0,O.Z)().mark((function e(r){var n;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,F.hJ)(M.db,"discussions"),e.next=3,(0,F.ET)(n,{body:r,comments:[],timeStamp:Date.now(),displayName:q||"none",userId:W||"none"}).then((function(e){console.log(e)})).catch((function(e){console.error(e)}));case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),G=function(){var e=(0,U.Z)((0,O.Z)().mark((function e(){var r,n,t;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,F.hJ)(M.db,"discussions"),e.next=3,(0,F.PL)(r);case 3:return n=e.sent,t=n.docs.map(function(){var e=(0,U.Z)((0,O.Z)().mark((function e(r){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.Z)((0,i.Z)({},r.data()),{},{id:r.id}));case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),e.abrupt("return",Promise.all(t));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=(0,U.Z)((0,O.Z)().mark((function e(r,n){var t;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,F.JU)(M.db,"discussions",r.id),e.next=3,(0,F.pl)(t,(0,i.Z)((0,i.Z)({},r),{},{comments:[].concat((0,L.Z)(r.comments),[{comment:n,displayName:q,uid:W}])})).then((function(e){console.log("result: ",e)}));case 3:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),Q=function(){var e=(0,U.Z)((0,O.Z)().mark((function e(r,n){var t;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,F.JU)(M.db,"discussions",r.id),r.comments.splice(n,1),e.next=4,(0,F.pl)(t,r).then((function(e){console.log("result: ",e)}));case 4:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),V=localStorage.getItem("uid"),X=function(){var e=(0,s.useState)(""),r=(0,t.Z)(e,2),n=r[0],i=r[1],o=(0,s.useState)([]),l=(0,t.Z)(o,2),d=l[0],u=l[1],m=(0,s.useState)(""),f=(0,t.Z)(m,2),p=f[0],h=f[1];return(0,s.useEffect)((function(){G().then((function(e){e.sort((function(e,r){return r.timeStamp-e.timeStamp})),u(e.map((function(e){return e})))}))}),[]),(0,x.jsxs)(a.Z,{className:"discuss-container",children:[(0,x.jsx)(c.Z,{children:(0,x.jsx)("div",{className:"card-group",children:(0,x.jsxs)(J,{children:[(0,x.jsx)("div",{className:"card-header",children:(0,x.jsx)("h3",{children:"Create Discussion"})}),(0,x.jsx)("div",{className:"card-body center",children:(0,x.jsx)("textarea",{rows:"4",style:{width:"100%",height:"100%"},onChange:function(e){return i(e.target.value)}})}),(0,x.jsx)("div",{className:"card-footer center",children:V?(0,x.jsx)("button",{className:"btn btn-primary",onClick:function(){return A(n)},children:"submit"}):"please login to create discussion"})]})})}),(0,x.jsx)(c.Z,{children:(0,x.jsx)("div",{style:{marginTop:"20px"},children:d.map((function(e){var r;return(0,x.jsxs)("div",{className:"card",style:{margin:"20px 0 20px 0"},children:[(0,x.jsx)("div",{className:"card-header",children:(0,x.jsxs)(c.Z,{children:[(0,x.jsx)(z.Z,{xs:11,children:null===e||void 0===e?void 0:e.displayName}),e.userId===V&&(0,x.jsx)(z.Z,{xs:1,className:"full-center",children:(0,x.jsx)(B.Z,{color:"error",children:"x"})})]})}),(0,x.jsx)("h4",{className:"card-text discussion-comment",children:null===e||void 0===e?void 0:e.body}),(0,x.jsxs)("div",{className:"card-footer",children:[null===e||void 0===e||null===(r=e.comments)||void 0===r?void 0:r.map((function(r,n){return(0,x.jsx)(c.Z,{className:"comment-container",children:(0,x.jsxs)(z.Z,{xs:12,className:"dialog-text",children:[(0,x.jsxs)(c.Z,{style:{fontSize:"12px"},xs:2,children:[(0,x.jsx)(z.Z,{xs:11,children:r.displayName}),(0,x.jsx)(z.Z,{xs:1,className:"full-center",style:{paddingRight:"0px"},children:r.uid===V&&(0,x.jsx)(B.Z,{color:"error",style:{fontSize:"9px",borderTopRightRadius:"0px"},onClick:function(){return Q(e,n)},children:"x"})})]}),(0,x.jsx)(c.Z,{style:{margin:"5px 0px 5px 0px"},xs:8,children:r.comment})]})},"comment+"+e.id+n)})),V&&(0,x.jsxs)(c.Z,{className:"add-comment-container",children:[(0,x.jsx)(z.Z,{xs:9,sm:10,lg:11,children:(0,x.jsx)(D.Z,{fullWidth:!0,label:"comment",color:"",onChange:function(e){return h(e.target.value)}})}),(0,x.jsx)(z.Z,{xs:3,sm:2,lg:1,className:"full-center",children:(0,x.jsx)(B.Z,{className:"btn btn-primary",style:{fontSize:"10px"},onClick:function(){K(e,p)},children:"Comment"})})]})]})]},e.id)}))})})]})}}}]);
//# sourceMappingURL=297.dda9c933.chunk.js.map