"use strict";(self.webpackChunkbalisales=self.webpackChunkbalisales||[]).push([[502],{6502:function(e,t,n){n.r(t),n.d(t,{default:function(){return z}});var i=n(4165),l=n(5861),a=n(1413),d=n(3433),s=n(9439),r=n(2791),o=n(3675),u=n(6519),c=n(9743),v=n(2677),f=n(6157),b=n(9230),Z=n(184),h=function(e){var t=e.deletePost,n=e.item,i=e.openDeleteModal,l=e.setOpenDeleteModal,a=e.setOpenEditModal,d=(0,b.$G)().t;return(0,Z.jsx)(u.Z,{open:i,id:"delete-modal",children:(0,Z.jsx)(c.Z,{className:"modal-dialog delete-modal",children:(0,Z.jsxs)(v.Z,{xs:2,className:"modal-content modal-background-edit center",children:[(0,Z.jsx)(c.Z,{className:"modal-header",children:(0,Z.jsx)(v.Z,{className:"modal-title",children:d("Do you want to delete this post?")})}),(0,Z.jsx)("br",{}),(0,Z.jsxs)(c.Z,{children:[(0,Z.jsx)(v.Z,{xs:6,children:(0,Z.jsx)(f.Z,{onClick:function(){return l(!1)},children:d("No")})}),(0,Z.jsx)(v.Z,{xs:6,children:(0,Z.jsx)(f.Z,{onClick:function(){t(n).then((function(){return a(!1)})),l(!1)},children:d("Yes")})})]})]})})})},m=n(9891),p=n(1747),x=n(7391),j=n(6362),g=n(4925),N=n(8588),y=n(9062),S=n(2892),C=n(6278),k=n(4453),w=function(){var e=(0,l.Z)((0,i.Z)().mark((function e(t,n){var l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=(0,y.JU)(S.db,"".concat((0,o.NZ)(),"-posts"),n),e.next=3,(0,y.pl)(l,t).then((function(){console.log("POST EDIT SAVED")})).catch((function(e){console.error("problem: ",e)}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),D=function(e){var t=e.item,n=e.setPosts,D=e.openEditModal,z=e.setOpenEditModal,O=e.filterPosts,I=e.setFilterPosts,P=(0,r.useState)(null===t||void 0===t?void 0:t.title),E=(0,s.Z)(P,2),M=E[0],V=E[1],W=(0,r.useState)(null===t||void 0===t?void 0:t.description),B=(0,s.Z)(W,2),T=B[0],$=B[1],R=(0,r.useState)(null===t||void 0===t?void 0:t.type),q=(0,s.Z)(R,2),F=q[0],G=q[1],J=(0,r.useState)(null===t||void 0===t?void 0:t.blade),U=(0,s.Z)(J,2),Y=U[0],_=U[1],A=(0,r.useState)(null===t||void 0===t?void 0:t.brand),H=(0,s.Z)(A,2),K=H[0],L=H[1],Q=(0,r.useState)(null===t||void 0===t?void 0:t.condition),X=(0,s.Z)(Q,2),ee=X[0],te=X[1],ne=(0,r.useState)(null===t||void 0===t?void 0:t.price),ie=(0,s.Z)(ne,2),le=ie[0],ae=ie[1],de=(0,r.useState)(null===t||void 0===t?void 0:t.status),se=(0,s.Z)(de,2),re=se[0],oe=se[1],ue=(0,r.useState)(!1),ce=(0,s.Z)(ue,2),ve=ce[0],fe=ce[1],be=(0,r.useState)(!1),Ze=(0,s.Z)(be,2),he=Ze[0],me=Ze[1],pe=(0,r.useState)({title:!0,type:!0,blade:!0,brand:!0,condition:!0,price:!0,status:!0}),xe=(0,s.Z)(pe,2),je=xe[0],ge=xe[1],Ne=(0,b.$G)().t;(0,r.useEffect)((function(){var e=!1;return e||(V(null===t||void 0===t?void 0:t.title),$(null===t||void 0===t?void 0:t.description),G(null===t||void 0===t?void 0:t.type),_(null===t||void 0===t?void 0:t.blade),L(null===t||void 0===t?void 0:t.brand),te(null===t||void 0===t?void 0:t.condition),ae(null===t||void 0===t?void 0:t.price),oe(null===t||void 0===t?void 0:t.status)),function(){return e=!0}}),[t]);var ye=(0,r.useMemo)((function(){var e=!Object.values(je).some((function(e){return!1===e}));return!0===e&&me(!1),e}),[je]),Se=function(e,t){return e.map((function(e){return(0,Z.jsx)(m.Z,{value:e,children:Ne(e)},t+"-"+e)}))},Ce=function(){var e=(0,l.Z)((0,i.Z)().mark((function e(t){var n,l,a,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,k.cF)(),l=(0,y.JU)(S.db,"".concat((0,o.NZ)(),"-posts"),t.id),e.next=4,(0,y.oe)(l);case 4:(0,C.sq)(t.id),a=0;case 6:if(!(a<t.numberOfImages)){e.next=13;break}return d=(0,k.iH)(n,"".concat((0,o.NZ)(),"-postImages/").concat(t.id,"/image-").concat(a)),e.next=10,(0,k.oq)(d);case 10:a++,e.next=6;break;case 13:I(null===O||void 0===O?void 0:O.filter((function(e){return e.id!==t.id})));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,Z.jsx)(u.Z,{open:D,children:(0,Z.jsx)(c.Z,{className:"edit-modal",children:(0,Z.jsxs)(v.Z,{xs:7,className:"modal-background-edit center",children:[(0,Z.jsx)(h,{deletePost:Ce,item:t,openDeleteModal:ve,setOpenDeleteModal:fe,setOpenEditModal:z}),(0,Z.jsxs)(c.Z,{className:"edit-input",children:[(0,Z.jsx)(v.Z,{xs:6,sm:9,className:"left",children:(0,Z.jsx)("h2",{children:Ne("Edit")})}),(0,Z.jsx)(v.Z,{xs:6,sm:3,children:(0,Z.jsx)(f.Z,{variant:"danger",onClick:function(e){e.preventDefault(),fe(!0)},children:Ne("Delete")})})]}),(0,Z.jsx)(c.Z,{className:"edit-input",children:(0,Z.jsx)(x.Z,{error:!je.title,fullWidth:!0,size:"small",value:M,label:Ne("Title"),className:"input-width",onChange:function(e){var t=e.target.value;t.match(/['\-"><;:\\+{}!@#$%=^*_|[\]]/)||(ge((function(e){return(0,a.Z)((0,a.Z)({},e),{},{title:""!==t})})),V(t))}})}),(0,Z.jsx)(c.Z,{className:"edit-input",children:(0,Z.jsx)(x.Z,{fullWidth:!0,size:"small",value:le,type:"number",label:Ne("Price"),className:"input-width",onChange:function(e){var t=e.target.value;t.match(/['\-"]/)||(ge((function(e){return(0,a.Z)((0,a.Z)({},e),{},{price:""!==t})})),ae(t))}})}),(0,Z.jsx)(c.Z,{className:"edit-input",children:(0,Z.jsxs)(j.Z,{fullWidth:!0,children:[(0,Z.jsx)(g.Z,{error:!1===je.brand&&he,size:"small",id:"brand-edit-label",children:Ne("Brand")}),(0,Z.jsx)(N.Z,{labelId:"brand-edit-label",id:"brand-edit-select",size:"small",defaultValue:null===t||void 0===t?void 0:t.brand,value:K,label:Ne("Brand"),onChange:function(e){var t=e.target.value;""!==t&&ge((function(e){return(0,a.Z)((0,a.Z)({},e),{},{brand:!0})})),L(t)},children:Se(o.YS,"brand")})]})}),(0,Z.jsx)(c.Z,{className:"edit-input",children:(0,Z.jsxs)(j.Z,{fullWidth:!0,error:!1===je.blade&&he,children:[(0,Z.jsx)(g.Z,{id:"blade-edit-label",size:"small",children:Ne("Blade")}),(0,Z.jsx)(N.Z,{labelId:"blade-edit-label",id:"blade-edit-select",size:"small",defaultValue:null===t||void 0===t?void 0:t.blade,value:Y,label:Ne("Blade"),onChange:function(e){var t=e.target.value;""!==t&&ge((function(e){return(0,a.Z)((0,a.Z)({},e),{},{blade:!0})})),_(t)},children:Se(o.SP,"blade")})]})}),(0,Z.jsx)(c.Z,{className:"edit-input",children:(0,Z.jsxs)(j.Z,{fullWidth:!0,children:[(0,Z.jsx)(g.Z,{error:!1===je.type&&he,size:"small",id:"business-edit-label",children:Ne("Sale Type")}),(0,Z.jsx)(N.Z,{labelId:"business-edit-label",id:"business-edit-select",size:"small",defaultValue:null===t||void 0===t?void 0:t.type,value:F,label:Ne("Sale Type"),onChange:function(e){var t=e.target.value;""!==t&&ge((function(e){return(0,a.Z)((0,a.Z)({},e),{},{type:!0})})),G(t)},children:Se(o.V5,"type")})]})}),(0,Z.jsx)(c.Z,{className:"edit-input",children:(0,Z.jsxs)(j.Z,{fullWidth:!0,children:[(0,Z.jsx)(g.Z,{error:!1===je.condition&&he,size:"small",id:"condition-edit-label",children:Ne("Condition")}),(0,Z.jsx)(N.Z,{labelId:"condition-edit-label",id:"condition-edit-select",size:"small",defaultValue:null===t||void 0===t?void 0:t.condition,value:ee,label:Ne("Condition"),onChange:function(e){var t=e.target.value;""!==t&&ge((function(e){return(0,a.Z)((0,a.Z)({},e),{},{condition:!0})})),te(t)},children:Se([1,2,3,4,5,6,7,8,9,10],"condition")})]})}),(0,Z.jsx)(c.Z,{className:"edit-input",children:(0,Z.jsxs)(j.Z,{fullWidth:!0,children:[(0,Z.jsx)(g.Z,{error:!1===je.status&&he,size:"small",id:"status-edit-label",children:Ne("Status")}),(0,Z.jsx)(N.Z,{labelId:"status-edit-label",id:"status-edit-select",size:"small",defaultValue:null===t||void 0===t?void 0:t.status,value:re,label:Ne("Status"),onChange:function(e){var t=e.target.value;""!==t&&ge((function(e){return(0,a.Z)((0,a.Z)({},e),{},{status:!0})})),oe(t)},children:Se(o.Do,"status")})]})}),(0,Z.jsx)(c.Z,{className:"edit-input",children:(0,Z.jsx)(p.Z,{fullwidth:"true",minRows:3,value:T,placeholder:Ne("Description"),label:Ne("Description"),onChange:function(e){var t=e.target.value;t.match(/['\-"><;:\\+{}!@#$%=^*_|[\]]/)||$(t)}})}),(0,Z.jsxs)(c.Z,{className:"edit-input",children:[(0,Z.jsx)(v.Z,{xs:6,children:(0,Z.jsx)(f.Z,{onClick:function(e){z(!1),V(null===t||void 0===t?void 0:t.title),$(null===t||void 0===t?void 0:t.description),G(null===t||void 0===t?void 0:t.type),_(null===t||void 0===t?void 0:t.blade),L(null===t||void 0===t?void 0:t.brand),te(null===t||void 0===t?void 0:t.condition),ae(null===t||void 0===t?void 0:t.price),oe(null===t||void 0===t?void 0:t.status)},children:Ne("Cancel")})}),(0,Z.jsx)(v.Z,{xs:6,children:(0,Z.jsx)(f.Z,{disabled:he,onClick:function(){ye?(ye&&w({title:M,type:F,blade:Y,brand:K,condition:ee,price:le,description:T,status:re,timeStamp:t.timeStamp,editTimeStamp:Date.now(),numberOfImages:t.numberOfImages,author:{name:t.author.name,id:t.author.id}},t.id).then((function(e){n((function(e){return(0,d.Z)(e.map((function(e){return e.id===t.id?(0,a.Z)((0,a.Z)({},t),{},{title:M,type:F,blade:Y,brand:K,condition:ee,price:le,description:T,status:re}):e})))})),console.log("result: ",e)})).catch((function(e){console.error("problem when saving the edit post: ",e)})),z(!1)):me(!0)},children:Ne("Submit")})})]})]})})})},z=D},6157:function(e,t,n){n.d(t,{Z:function(){return h}});var i=n(1413),l=n(9439),a=n(5987),d=n(1694),s=n.n(d),r=n(2791),o=n(184),u=["as","disabled"];function c(e){var t=e.tagName,n=e.disabled,i=e.href,l=e.target,a=e.rel,d=e.role,s=e.onClick,r=e.tabIndex,o=void 0===r?0:r,u=e.type;t||(t=null!=i||null!=l||null!=a?"a":"button");var c={tagName:t};if("button"===t)return[{type:u||"button",disabled:n},c];var v=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(i))&&e.preventDefault(),n?e.stopPropagation():null==s||s(e)};return"a"===t&&(i||(i="#"),n&&(i=void 0)),[{role:null!=d?d:"button",disabled:void 0,tabIndex:n?void 0:o,href:i,target:"a"===t?l:void 0,"aria-disabled":n||void 0,rel:"a"===t?a:void 0,onClick:v,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),v(e))}},c]}var v=r.forwardRef((function(e,t){var n=e.as,i=e.disabled,a=function(e,t){if(null==e)return{};var n,i,l={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,u),d=c(Object.assign({tagName:n,disabled:i},a)),s=(0,l.Z)(d,2),r=s[0],v=s[1].tagName;return(0,o.jsx)(v,Object.assign({},a,r,{ref:t}))}));v.displayName="Button";var f=n(162),b=["as","bsPrefix","variant","size","active","className"],Z=r.forwardRef((function(e,t){var n=e.as,d=e.bsPrefix,r=e.variant,u=e.size,v=e.active,Z=e.className,h=(0,a.Z)(e,b),m=(0,f.vE)(d,"btn"),p=c((0,i.Z)({tagName:n},h)),x=(0,l.Z)(p,2),j=x[0],g=x[1].tagName;return(0,o.jsx)(g,(0,i.Z)((0,i.Z)((0,i.Z)({},j),h),{},{ref:t,className:s()(Z,m,v&&"active",r&&"".concat(m,"-").concat(r),u&&"".concat(m,"-").concat(u),h.href&&h.disabled&&"disabled")}))}));Z.displayName="Button",Z.defaultProps={variant:"primary",active:!1,disabled:!1};var h=Z}}]);
//# sourceMappingURL=502.c131eb45.chunk.js.map