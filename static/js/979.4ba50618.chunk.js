"use strict";(self.webpackChunkbalisales=self.webpackChunkbalisales||[]).push([[979],{1822:function(e,n,t){t.r(n),t.d(n,{default:function(){return P}});var a=t(4165),r=t(5861),l=t(1413),i=t(3433),s=t(9439),c=t(2791),u=t(2677),o=t(7022),d=t(9743),f=t(6157),h=t(3675),b=t(4894),v=t(9062),Z=t(2892),p=t(4453),m=t(9135),x=t(7391),g=t(6362),j=t(9891),N=t(4925),y=t(8588),S=t(1747),C=t(9230),I=t(184);var k=function(){var e=(0,c.useState)(""),n=(0,s.Z)(e,2),t=n[0],k=n[1],P=(0,c.useState)(""),w=(0,s.Z)(P,2),B=w[0],O=w[1],D=(0,c.useState)(""),W=(0,s.Z)(D,2),R=W[0],T=W[1],U=(0,c.useState)(""),V=(0,s.Z)(U,2),z=V[0],F=V[1],_=(0,c.useState)(""),E=(0,s.Z)(_,2),H=E[0],L=E[1],M=(0,c.useState)(""),$=(0,s.Z)(M,2),A=$[0],G=$[1],J=(0,c.useState)(""),K=(0,s.Z)(J,2),Y=K[0],q=K[1],Q=(0,c.useState)(!1),X=(0,s.Z)(Q,2),ee=X[0],ne=X[1],te=(0,c.useState)([]),ae=(0,s.Z)(te,2),re=ae[0],le=ae[1],ie=(0,c.useState)([]),se=(0,s.Z)(ie,2),ce=se[0],ue=se[1],oe=(0,c.useState)(0),de=(0,s.Z)(oe,2),fe=(de[0],de[1]),he=(0,c.useState)(0),be=(0,s.Z)(he,2),ve=be[0],Ze=be[1],pe=(0,c.useState)({title:!1,price:!1,brand:!1,sale:!1,condition:!1,blade:!1,picture:!1}),me=(0,s.Z)(pe,2),xe=me[0],ge=me[1],je=(0,C.$G)().t,Ne=(0,c.useMemo)((function(){var e=!Object.values(xe).some((function(e){return!1===e}));return!0===e&&ne(!1),e}),[xe]),ye=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var n,r,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ne(!0),Ne){e.next=3;break}return e.abrupt("return");case 3:if(re[0]){e.next=6;break}return alert("Please upload an image first!"),e.abrupt("return");case 6:return l=(0,v.hJ)(Z.db,"production-posts"),e.next=9,(0,v.ET)(l,{status:"Available",title:t,type:R,blade:Y,brand:z,condition:H,price:A,description:B,numberOfImages:re.length,timeStamp:Date.now(),author:{name:(null===Z.I8||void 0===Z.I8||null===(n=Z.I8.currentUser)||void 0===n?void 0:n.displayName)||"anonymous",id:(null===Z.I8||void 0===Z.I8||null===(r=Z.I8.currentUser)||void 0===r?void 0:r.uid)||"none"}}).then((function(e){var n=[];return re.map((function(t,a){var r=(0,p.iH)(Z.tO,"/".concat((0,h.NZ)(),"-postImages/").concat(e.id,"/image-").concat(a)),l=(0,p.B0)(r,t);n.push(l),l.on("state_changed",(function(e){var n=Math.round(e.bytesTransferred/e.totalBytes*100);fe(n)}),(function(e){return console.log(e)}),(function(){console.log(r)}))})),Promise.all(n).then((function(){console.log("all uploaded"),k(""),O(""),T(""),F(""),L(""),G(""),q(""),Ze(0),le([]),ue([]),ne(!1)})).catch((function(e){console.error(e)})),e})).then((function(e){(0,b.iy)(e.id)})).catch((function(){console.log("error with creating post")}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(e,n){return e.map((function(e){return(0,I.jsx)(j.Z,{value:e,children:je(e)},n+"-"+e)}))};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(o.Z,{className:"create-header-container",children:(0,I.jsx)(d.Z,{children:(0,I.jsx)(u.Z,{className:"create-header",children:(0,I.jsx)("h2",{children:je("Create Post")})})})}),(0,I.jsxs)(o.Z,{className:"create-container",children:[(0,I.jsxs)(d.Z,{children:[(0,I.jsx)(u.Z,{xs:12,md:6,className:"create-input",children:(0,I.jsx)(x.Z,{fullWidth:!0,label:je("Title"),color:"",error:!1===xe.title&&ee,type:"search",value:t,onChange:function(e){var n=e.target.value;n.length>25||n.match(/['\-"><;:\\+{}!@#$%=^*_|[\]]/)||(ge((function(e){return(0,l.Z)((0,l.Z)({},e),{},{title:""!==n})})),k(n))}})}),(0,I.jsx)(u.Z,{xs:12,md:6,className:"create-input",children:(0,I.jsx)(x.Z,{fullWidth:!0,label:je("Price"),color:"",error:!1===xe.price&&ee,type:"number",value:A,onChange:function(e){var n=e.target.value;n.match(/[-]/)||(ge((function(e){return(0,l.Z)((0,l.Z)({},e),{},{price:""!==n})})),G(n))}})}),(0,I.jsx)(u.Z,{xs:12,md:6,className:"create-input",children:(0,I.jsxs)(g.Z,{fullWidth:!0,error:!1===xe.brand&&ee,children:[(0,I.jsx)(N.Z,{id:"brand-label",children:je("Brand")}),(0,I.jsx)(y.Z,{labelId:"brand-label",id:"brand-select",label:"Brand",defaultValue:"",value:z,onChange:function(e){var n=e.target.value;""!==n&&ge((function(e){return(0,l.Z)((0,l.Z)({},e),{},{brand:!0})})),F(n)},children:Se(h.YS,"brand")})]})}),(0,I.jsx)(u.Z,{xs:12,md:6,className:"create-input",children:(0,I.jsxs)(g.Z,{fullWidth:!0,error:!1===xe.sale&&ee,children:[(0,I.jsx)(N.Z,{id:"sale-type-label",children:je("Sale Type")}),(0,I.jsx)(y.Z,{labelId:"sale-type-label",id:"sale-type-select",label:je("Sale Type"),defaultValue:"",value:R,onChange:function(e){var n=e.target.value;""!==n&&ge((function(e){return(0,l.Z)((0,l.Z)({},e),{},{sale:!0})})),T(n)},children:Se(h.V5,"type")})]})}),(0,I.jsx)(u.Z,{xs:12,md:6,className:"create-input",children:(0,I.jsxs)(g.Z,{fullWidth:!0,error:!1===xe.condition&&ee,children:[(0,I.jsx)(N.Z,{id:"condition-label",children:je("Condition")}),(0,I.jsx)(y.Z,{labelId:"condition-label",id:"condition-select",label:je("Condition"),defaultValue:"",value:H,onChange:function(e){var n=e.target.value;""!==n&&ge((function(e){return(0,l.Z)((0,l.Z)({},e),{},{condition:!0})})),L(n)},children:Se([1,2,3,4,5,6,7,8,9,10],"condition")})]})}),(0,I.jsx)(u.Z,{xs:12,md:6,className:"create-input",children:(0,I.jsxs)(g.Z,{fullWidth:!0,error:!1===xe.blade&&ee,children:[(0,I.jsx)(N.Z,{id:"blade-label",children:je("Blade")}),(0,I.jsx)(y.Z,{labelId:"blade-label",id:"blade-select",label:je("Blade"),defaultValue:"",value:Y,onChange:function(e){var n=e.target.value;""!==n&&ge((function(e){return(0,l.Z)((0,l.Z)({},e),{},{blade:!0})})),q(n)},children:Se(h.SP,"blade")})]})})]}),(0,I.jsx)(d.Z,{children:(0,I.jsx)(u.Z,{xs:12,children:(0,I.jsx)(S.Z,{style:{width:"100%"},minRows:5,value:B,placeholder:je("Description"),label:je("Description"),onChange:function(e){var n=e.target.value;n.length>425||n.match(/[\-><;:\\+{}@%=^*_|[\]]/)||O(n)}})})}),(0,I.jsxs)(d.Z,{children:[(0,I.jsx)(u.Z,{xs:"12",className:"setting-item center",children:(0,I.jsxs)("label",{className:"profile-label",htmlFor:"inputPicture-default",children:[(0,I.jsx)("b",{children:je("Upload Image")}),(0,I.jsx)("input",{id:"inputPicture-default",className:"profile-input",type:"file",onChange:function(e){var n;(n=e).target.files&&n.target.files[0]&&(ue((function(e){return[].concat((0,i.Z)(e),[URL.createObjectURL(n.target.files[0])])})),le((function(e){return[].concat((0,i.Z)(e),[n.target.files[0]])})),Ze((function(e){return e+1})),ge((function(e){return(0,l.Z)((0,l.Z)({},e),{},{picture:!0})})))},accept:"/image/*"}),(0,I.jsx)("br",{}),(0,I.jsx)(m.H3h,{size:70,className:""})]})}),function(){for(var e=[],n=function(n){var t,a,r,i;e.push((0,I.jsx)(u.Z,{xs:"12",className:"setting-item center",children:(0,I.jsxs)("label",{className:"profile-label",htmlFor:"inputPicture-"+(null===(a=re[n])||void 0===a?void 0:a.name),onClick:function(){return function(e){for(var n=[],t=[],a=0;a<ce.length;a++)e!==a&&(n.push(ce[a]),t.push(re[a]));ue(n),le(t),Ze((function(e){return e-1})),ve-1===0&&ge((function(e){return(0,l.Z)((0,l.Z)({},e),{},{picture:!1})}))}(n)},children:[(0,I.jsx)("span",{children:null===(r=re[n])||void 0===r?void 0:r.name}),(0,I.jsx)("br",{}),(0,I.jsx)("img",{id:"inputPicture-"+(null===(i=re[n])||void 0===i?void 0:i.name),src:ce[n],className:"upload-image",alt:"preview image"})]})},null===(t=re[n])||void 0===t?void 0:t.name))},t=0;t<re.length;t++)n(t);return e}()]}),(0,I.jsx)(d.Z,{children:(0,I.jsx)(u.Z,{xs:12,className:"center",children:(0,I.jsx)(f.Z,{disabled:ee,className:"submit-button",onClick:ye,children:je("Submit")})})})]})]})},P=k},6157:function(e,n,t){t.d(n,{Z:function(){return Z}});var a=t(1413),r=t(9439),l=t(5987),i=t(1694),s=t.n(i),c=t(2791),u=t(184),o=["as","disabled"];function d(e){var n=e.tagName,t=e.disabled,a=e.href,r=e.target,l=e.rel,i=e.role,s=e.onClick,c=e.tabIndex,u=void 0===c?0:c,o=e.type;n||(n=null!=a||null!=r||null!=l?"a":"button");var d={tagName:n};if("button"===n)return[{type:o||"button",disabled:t},d];var f=function(e){(t||"a"===n&&function(e){return!e||"#"===e.trim()}(a))&&e.preventDefault(),t?e.stopPropagation():null==s||s(e)};return"a"===n&&(a||(a="#"),t&&(a=void 0)),[{role:null!=i?i:"button",disabled:void 0,tabIndex:t?void 0:u,href:a,target:"a"===n?r:void 0,"aria-disabled":t||void 0,rel:"a"===n?l:void 0,onClick:f,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),f(e))}},d]}var f=c.forwardRef((function(e,n){var t=e.as,a=e.disabled,l=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,o),i=d(Object.assign({tagName:t,disabled:a},l)),s=(0,r.Z)(i,2),c=s[0],f=s[1].tagName;return(0,u.jsx)(f,Object.assign({},l,c,{ref:n}))}));f.displayName="Button";var h=t(162),b=["as","bsPrefix","variant","size","active","className"],v=c.forwardRef((function(e,n){var t=e.as,i=e.bsPrefix,c=e.variant,o=e.size,f=e.active,v=e.className,Z=(0,l.Z)(e,b),p=(0,h.vE)(i,"btn"),m=d((0,a.Z)({tagName:t},Z)),x=(0,r.Z)(m,2),g=x[0],j=x[1].tagName;return(0,u.jsx)(j,(0,a.Z)((0,a.Z)((0,a.Z)({},g),Z),{},{ref:n,className:s()(v,p,f&&"active",c&&"".concat(p,"-").concat(c),o&&"".concat(p,"-").concat(o),Z.href&&Z.disabled&&"disabled")}))}));v.displayName="Button",v.defaultProps={variant:"primary",active:!1,disabled:!1};var Z=v}}]);
//# sourceMappingURL=979.4ba50618.chunk.js.map