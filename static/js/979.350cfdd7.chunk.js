"use strict";(self.webpackChunkbalisales=self.webpackChunkbalisales||[]).push([[979],{1822:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var a=t(1413),r=t(4165),l=t(5861),i=t(2982),s=t(885),c=t(2791),u=t(2677),o=t(7022),d=t(9743),f=t(6157),h=t(3675),Z=t(4894),p=t(9062),b=t(2892),m=t(4453),x=t(9135),v=t(4530),j=t(6362),g=t(9891),S=t(4925),y=t(3347),N=t(1747),C=t(184);var I=function(){var e=(0,c.useState)(""),n=(0,s.Z)(e,2),t=n[0],I=n[1],k=(0,c.useState)(""),w=(0,s.Z)(k,2),B=w[0],P=w[1],W=(0,c.useState)(""),U=(0,s.Z)(W,2),V=U[0],O=U[1],T=(0,c.useState)(""),R=(0,s.Z)(T,2),D=R[0],H=R[1],L=(0,c.useState)(""),M=(0,s.Z)(L,2),z=M[0],E=M[1],F=(0,c.useState)(""),J=(0,s.Z)(F,2),Y=J[0],$=J[1],_=(0,c.useState)(""),q=(0,s.Z)(_,2),A=q[0],G=q[1],K=(0,c.useState)(!1),Q=(0,s.Z)(K,2),X=Q[0],ee=Q[1],ne=(0,c.useState)([]),te=(0,s.Z)(ne,2),ae=te[0],re=te[1],le=(0,c.useState)([]),ie=(0,s.Z)(le,2),se=ie[0],ce=ie[1],ue=(0,c.useState)(0),oe=(0,s.Z)(ue,2),de=(oe[0],oe[1]),fe=(0,c.useState)(0),he=(0,s.Z)(fe,2),Ze=he[0],pe=he[1],be=(0,c.useState)({title:!1,price:!1,brand:!1,sale:!1,condition:!1,blade:!1}),me=(0,s.Z)(be,2),xe=me[0],ve=me[1],je=(0,c.useMemo)((function(){var e=!Object.values(xe).some((function(e){return!1===e}));return!0===e&&ee(!1),e}),[xe]),ge=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(){var n,a,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(je){e.next=3;break}return ee(!0),e.abrupt("return");case 3:if(ae[0]){e.next=6;break}return alert("Please upload an image first!"),e.abrupt("return");case 6:return l=(0,p.hJ)(b.db,"posts"),e.next=9,(0,p.ET)(l,{title:t,type:V,blade:A,brand:D,condition:z,price:Y,description:B,numberOfImages:ae.length,timeStamp:Date.now(),author:{name:(null===b.I8||void 0===b.I8||null===(n=b.I8.currentUser)||void 0===n?void 0:n.displayName)||"anonymous",id:(null===b.I8||void 0===b.I8||null===(a=b.I8.currentUser)||void 0===a?void 0:a.uid)||"none"}}).then((function(e){var n=[];return ae.map((function(t,a){var r=(0,m.iH)(b.tO,"/PostImages/".concat(e.id,"/image-").concat(a)),l=(0,m.B0)(r,t);n.push(l),l.on("state_changed",(function(e){var n=Math.round(e.bytesTransferred/e.totalBytes*100);de(n)}),(function(e){return console.log(e)}),(function(){console.log(r)}))})),Promise.all(n).then((function(){console.log("all uploaded"),I(""),P(""),O(""),H(""),E(""),$(""),G(""),pe(0),re([]),ce([]),ee(!1)})).catch((function(e){console.error(e)})),e})).then((function(e){(0,Z.iy)(e.id)})).catch((function(){console.log("error with creating post")}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(e,n){return e.map((function(e){return(0,C.jsx)(g.Z,{value:e,children:e},n+"-"+e)}))};return(0,C.jsxs)(o.Z,{className:"create-container",children:[(0,C.jsxs)(d.Z,{children:[(0,C.jsx)(u.Z,{xs:12,md:6,className:"create-input",children:(0,C.jsx)(v.Z,{fullWidth:!0,label:"title",color:"",error:!1===xe.title&&X,type:"search",value:t,onChange:function(e){var n=e.target.value;n.match(/[%<>\\$'"]/)||(ve((function(e){return(0,a.Z)((0,a.Z)({},e),{},{title:""!==n})})),I(n))}})}),(0,C.jsx)(u.Z,{xs:12,md:6,className:"create-input",children:(0,C.jsx)(v.Z,{fullWidth:!0,label:"price",color:"",error:!1===xe.price&&X,type:"number",value:Y,onChange:function(e){var n=e.target.value;n.match(/[-]/)||(ve((function(e){return(0,a.Z)((0,a.Z)({},e),{},{price:""!==n})})),$(n))}})}),(0,C.jsx)(u.Z,{xs:12,md:6,className:"create-input",children:(0,C.jsxs)(j.Z,{fullWidth:!0,error:!1===xe.brand&&X,children:[(0,C.jsx)(S.Z,{id:"brand-label",children:"Brand"}),(0,C.jsx)(y.Z,{labelId:"brand-label",id:"brand-select",label:"Brand",defaultValue:"",value:D,onChange:function(e){var n=e.target.value;""!==n&&ve((function(e){return(0,a.Z)((0,a.Z)({},e),{},{brand:!0})})),H(n)},children:Se(h.YS,"brand")})]})}),(0,C.jsx)(u.Z,{xs:12,md:6,className:"create-input",children:(0,C.jsxs)(j.Z,{fullWidth:!0,error:!1===xe.sale&&X,children:[(0,C.jsx)(S.Z,{id:"sale-type-label",children:"Sale Type"}),(0,C.jsx)(y.Z,{labelId:"sale-type-label",id:"sale-type-select",label:"Sale Type",defaultValue:"",value:V,onChange:function(e){var n=e.target.value;""!==n&&ve((function(e){return(0,a.Z)((0,a.Z)({},e),{},{sale:!0})})),O(n)},children:Se(h.V5,"type")})]})}),(0,C.jsx)(u.Z,{xs:12,md:6,className:"create-input",children:(0,C.jsxs)(j.Z,{fullWidth:!0,error:!1===xe.condition&&X,children:[(0,C.jsx)(S.Z,{id:"condition-label",children:"Condition"}),(0,C.jsx)(y.Z,{labelId:"condition-label",id:"condition-select",label:"Condition",defaultValue:"",value:z,onChange:function(e){var n=e.target.value;""!==n&&ve((function(e){return(0,a.Z)((0,a.Z)({},e),{},{condition:!0})})),E(n)},children:Se([1,2,3,4,5,6,7,8,9,10],"condition")})]})}),(0,C.jsx)(u.Z,{xs:12,md:6,className:"create-input",children:(0,C.jsxs)(j.Z,{fullWidth:!0,error:!1===xe.blade&&X,children:[(0,C.jsx)(S.Z,{id:"blade-label",children:"Blade"}),(0,C.jsx)(y.Z,{labelId:"blade-label",id:"blade-select",label:"Blade",defaultValue:"",value:A,onChange:function(e){var n=e.target.value;""!==n&&ve((function(e){return(0,a.Z)((0,a.Z)({},e),{},{blade:!0})})),G(n)},children:Se(h.SP,"blade")})]})})]}),(0,C.jsx)(d.Z,{children:(0,C.jsx)(u.Z,{xs:12,children:(0,C.jsx)(N.Z,{style:{width:"100%"},minRows:5,value:B,placeholder:"Description",label:"description",onChange:function(e){return P(e.target.value)}})})}),(0,C.jsx)(d.Z,{children:function(){for(var e=[],n=function(n){var t;e.push((0,C.jsx)(u.Z,{xs:"12",sm:Ze>0?6:12,className:"setting-item center",children:(0,C.jsxs)("label",{className:"profile-label",htmlFor:"inputPicture-"+n,onClick:0!==n?function(){var e;0!==(e=n)&&(ce((function(n){return n.splice(e,1)})),re((function(n){return n.splice(e,1)})),pe((function(e){return e-1})))}:null,children:[(0,C.jsx)("span",{children:(null===(t=ae[Ze-n])||void 0===t?void 0:t.name)||"Upload Image"}),0===n&&(0,C.jsx)("input",{id:"inputPicture-"+n,className:"profile-input",type:"file",onChange:function(e){return a=n,void((t=e).target.files&&t.target.files[0]&&0===a&&(ce([URL.createObjectURL(t.target.files[0])].concat((0,i.Z)(se))),re((function(e){return[].concat((0,i.Z)(e),[t.target.files[0]])})),pe((function(e){return e+1}))));var t,a},accept:"/image/*"}),(0,C.jsx)("br",{}),0===n?(0,C.jsx)(x.H3h,{size:70,className:""}):(0,C.jsx)("img",{src:se[Ze-n],className:"upload-image",alt:"preview image"})]})},n+"+"+Ze))},t=0;t<=Ze;t++)n(t);return e}()}),(0,C.jsx)(d.Z,{children:(0,C.jsx)(u.Z,{xs:12,className:"center",children:(0,C.jsx)(f.Z,{disabled:X,className:"submit-button",onClick:ge,children:"Submit"})})})]})},k=I}}]);
//# sourceMappingURL=979.350cfdd7.chunk.js.map